"use strict";(self.webpackChunkcontrol_financiero_frontend=self.webpackChunkcontrol_financiero_frontend||[]).push([[123],{9123:(H,g,o)=>{o.r(g),o.d(g,{RegisterComponent:()=>z});var p=o(177),i=o(9417),m=o(5596),_=o(8834),E=o(9213),d=o(2102),h=o(9631),F=o(2765),C=o(9183),f=o(8498),D=o(152),I=o(3294),j=o(5558),e=o(4438),w=o(8010),x=o(5567);function y(t,s){1&t&&(e.j41(0,"mat-error"),e.EFF(1," El nombre es requerido "),e.k0s())}function L(t,s){1&t&&(e.j41(0,"mat-error"),e.EFF(1," M\xednimo 2 caracteres "),e.k0s())}function Y(t,s){1&t&&(e.j41(0,"mat-error"),e.EFF(1," El email es requerido "),e.k0s())}function G(t,s){1&t&&(e.j41(0,"mat-error"),e.EFF(1," Ingresa un email v\xe1lido "),e.k0s())}function $(t,s){1&t&&(e.j41(0,"mat-error"),e.EFF(1," Este email ya est\xe1 registrado "),e.k0s())}function A(t,s){1&t&&(e.j41(0,"mat-hint"),e.nrm(1,"mat-spinner",23),e.EFF(2," Verificando disponibilidad... "),e.k0s()),2&t&&(e.R7$(),e.Y8G("diameter",16))}function B(t,s){1&t&&(e.j41(0,"mat-error"),e.EFF(1," La contrase\xf1a es requerida "),e.k0s())}function U(t,s){1&t&&(e.j41(0,"mat-error"),e.EFF(1," M\xednimo 6 caracteres "),e.k0s())}function N(t,s){1&t&&(e.j41(0,"mat-error"),e.EFF(1," Debe contener al menos una letra y un n\xfamero "),e.k0s())}function W(t,s){1&t&&(e.j41(0,"mat-error"),e.EFF(1," Confirma tu contrase\xf1a "),e.k0s())}function K(t,s){1&t&&(e.j41(0,"mat-error"),e.EFF(1," Las contrase\xf1as no coinciden "),e.k0s())}function S(t,s){1&t&&(e.j41(0,"mat-error"),e.EFF(1," Debes aceptar los t\xe9rminos y condiciones "),e.k0s())}function V(t,s){1&t&&e.nrm(0,"mat-spinner",23),2&t&&e.Y8G("diameter",20)}function J(t,s){1&t&&(e.j41(0,"span"),e.EFF(1,"Crear Cuenta"),e.k0s())}function X(t,s){1&t&&(e.j41(0,"span"),e.EFF(1,"Creando cuenta..."),e.k0s())}let z=(()=>{class t{constructor(n,a,r,l){this.fb=n,this.authService=a,this.notificationService=r,this.router=l,this.hidePassword=!0,this.hideConfirmPassword=!0,this.loading=!1,this.verificandoEmail=!1,this.registerForm=this.fb.group({nombre:["",[i.k0.required,i.k0.minLength(2)]],apellido:[""],email:["",[i.k0.required,i.k0.email],[this.emailValidator.bind(this)]],telefono:[""],password:["",[i.k0.required,i.k0.minLength(6),i.k0.pattern(/^(?=.*[A-Za-z])(?=.*\d)/)]],confirmPassword:["",[i.k0.required]],aceptaTerminos:[!1,[i.k0.requiredTrue]]},{validators:this.passwordMatchValidator})}ngOnInit(){this.authService.isAuthenticated()&&this.router.navigate(["/dashboard"])}passwordMatchValidator(n){const a=n.get("password"),r=n.get("confirmPassword");return a&&r&&a.value!==r.value?(r.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):(r?.hasError("passwordMismatch")&&r.setErrors(null),null)}emailValidator(n){return n.value&&n.value.includes("@")?(this.verificandoEmail=!0,n.valueChanges.pipe((0,D.B)(500),(0,I.F)(),(0,j.n)(a=>this.authService.verificarEmailDisponible(a))).subscribe(a=>{this.verificandoEmail=!1,a||n.setErrors({emailTaken:!0})})):null}register(){if(this.registerForm.invalid||this.loading)return;this.loading=!0;const n=this.registerForm.value;this.authService.register({nombre:n.nombre,apellido:n.apellido||void 0,email:n.email,password:n.password,telefono:n.telefono||void 0}).subscribe({next:r=>{this.notificationService.success(`\xa1Bienvenido, ${r.usuario.nombre}! Tu cuenta ha sido creada exitosamente.`),this.router.navigate(["/dashboard"])},error:r=>{console.error("Error en registro:",r);let l="Error al crear la cuenta";400===r.status?l="Los datos proporcionados no son v\xe1lidos":409===r.status&&(l="Este email ya est\xe1 registrado"),this.notificationService.error(l),this.loading=!1},complete:()=>{this.loading=!1}})}mostrarTerminos(n){n.preventDefault(),this.notificationService.info("Los t\xe9rminos y condiciones est\xe1n en desarrollo")}static{this.\u0275fac=function(a){return new(a||t)(e.rXU(i.ok),e.rXU(w.u),e.rXU(x.J),e.rXU(f.Ix))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-register"]],standalone:!0,features:[e.aNF],decls:75,vars:21,consts:[[1,"register-container"],[1,"register-card"],[1,"register-form",3,"ngSubmit","formGroup"],[1,"form-row"],["appearance","outline",1,"half-width"],["matInput","","formControlName","nombre","placeholder","Tu nombre"],["matSuffix",""],[4,"ngIf"],["matInput","","formControlName","apellido","placeholder","Tu apellido"],["appearance","outline",1,"full-width"],["matInput","","type","email","formControlName","email","placeholder","tu@email.com"],["matInput","","formControlName","telefono","placeholder","+57 300 123 4567"],["matInput","","formControlName","password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["matInput","","formControlName","confirmPassword",3,"type"],[1,"checkbox-section"],["formControlName","aceptaTerminos"],["href","#",3,"click"],[1,"register-actions"],["mat-raised-button","","color","primary","type","submit",1,"full-width",3,"disabled"],[3,"diameter",4,"ngIf"],[1,"login-link"],["routerLink","/login","mat-button","","color","primary"],[3,"diameter"]],template:function(a,r){if(1&a&&(e.j41(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),e.EFF(5,"person_add"),e.k0s(),e.EFF(6," Crear Cuenta "),e.k0s(),e.j41(7,"mat-card-subtitle"),e.EFF(8,"\xdanete a Control Financiero"),e.k0s()(),e.j41(9,"mat-card-content")(10,"form",2),e.bIt("ngSubmit",function(){return r.register()}),e.j41(11,"div",3)(12,"mat-form-field",4)(13,"mat-label"),e.EFF(14,"Nombre"),e.k0s(),e.nrm(15,"input",5),e.j41(16,"mat-icon",6),e.EFF(17,"person"),e.k0s(),e.DNE(18,y,2,0,"mat-error",7)(19,L,2,0,"mat-error",7),e.k0s(),e.j41(20,"mat-form-field",4)(21,"mat-label"),e.EFF(22,"Apellido (Opcional)"),e.k0s(),e.nrm(23,"input",8),e.k0s()(),e.j41(24,"mat-form-field",9)(25,"mat-label"),e.EFF(26,"Email"),e.k0s(),e.nrm(27,"input",10),e.j41(28,"mat-icon",6),e.EFF(29,"email"),e.k0s(),e.DNE(30,Y,2,0,"mat-error",7)(31,G,2,0,"mat-error",7)(32,$,2,0,"mat-error",7)(33,A,3,1,"mat-hint",7),e.k0s(),e.j41(34,"mat-form-field",9)(35,"mat-label"),e.EFF(36,"Tel\xe9fono (Opcional)"),e.k0s(),e.nrm(37,"input",11),e.j41(38,"mat-icon",6),e.EFF(39,"phone"),e.k0s()(),e.j41(40,"mat-form-field",9)(41,"mat-label"),e.EFF(42,"Contrase\xf1a"),e.k0s(),e.nrm(43,"input",12),e.j41(44,"button",13),e.bIt("click",function(){return r.hidePassword=!r.hidePassword}),e.j41(45,"mat-icon"),e.EFF(46),e.k0s()(),e.DNE(47,B,2,0,"mat-error",7)(48,U,2,0,"mat-error",7)(49,N,2,0,"mat-error",7),e.k0s(),e.j41(50,"mat-form-field",9)(51,"mat-label"),e.EFF(52,"Confirmar Contrase\xf1a"),e.k0s(),e.nrm(53,"input",14),e.j41(54,"button",13),e.bIt("click",function(){return r.hideConfirmPassword=!r.hideConfirmPassword}),e.j41(55,"mat-icon"),e.EFF(56),e.k0s()(),e.DNE(57,W,2,0,"mat-error",7)(58,K,2,0,"mat-error",7),e.k0s(),e.j41(59,"div",15)(60,"mat-checkbox",16),e.EFF(61," Acepto los "),e.j41(62,"a",17),e.bIt("click",function(c){return r.mostrarTerminos(c)}),e.EFF(63,"t\xe9rminos y condiciones"),e.k0s()(),e.DNE(64,S,2,0,"mat-error",7),e.k0s(),e.j41(65,"div",18)(66,"button",19),e.DNE(67,V,1,1,"mat-spinner",20)(68,J,2,0,"span",7)(69,X,2,0,"span",7),e.k0s()()()(),e.j41(70,"mat-card-actions")(71,"div",21),e.EFF(72," \xbfYa tienes cuenta? "),e.j41(73,"a",22),e.EFF(74,"Inicia Sesi\xf3n"),e.k0s()()()()()),2&a){let l,c,P,M,R,v,k,O,T,b,u;e.R7$(10),e.Y8G("formGroup",r.registerForm),e.R7$(8),e.Y8G("ngIf",null==(l=r.registerForm.get("nombre"))?null:l.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(c=r.registerForm.get("nombre"))?null:c.hasError("minlength")),e.R7$(11),e.Y8G("ngIf",null==(P=r.registerForm.get("email"))?null:P.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(M=r.registerForm.get("email"))?null:M.hasError("email")),e.R7$(),e.Y8G("ngIf",null==(R=r.registerForm.get("email"))?null:R.hasError("emailTaken")),e.R7$(),e.Y8G("ngIf",r.verificandoEmail),e.R7$(10),e.Y8G("type",r.hidePassword?"password":"text"),e.R7$(3),e.JRh(r.hidePassword?"visibility_off":"visibility"),e.R7$(),e.Y8G("ngIf",null==(v=r.registerForm.get("password"))?null:v.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(k=r.registerForm.get("password"))?null:k.hasError("minlength")),e.R7$(),e.Y8G("ngIf",null==(O=r.registerForm.get("password"))?null:O.hasError("pattern")),e.R7$(4),e.Y8G("type",r.hideConfirmPassword?"password":"text"),e.R7$(3),e.JRh(r.hideConfirmPassword?"visibility_off":"visibility"),e.R7$(),e.Y8G("ngIf",null==(T=r.registerForm.get("confirmPassword"))?null:T.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(b=r.registerForm.get("confirmPassword"))?null:b.hasError("passwordMismatch")),e.R7$(6),e.Y8G("ngIf",(null==(u=r.registerForm.get("aceptaTerminos"))?null:u.hasError("required"))&&(null==(u=r.registerForm.get("aceptaTerminos"))?null:u.touched)),e.R7$(2),e.Y8G("disabled",r.registerForm.invalid||r.loading),e.R7$(),e.Y8G("ngIf",r.loading),e.R7$(),e.Y8G("ngIf",!r.loading),e.R7$(),e.Y8G("ngIf",r.loading)}},dependencies:[p.MD,p.bT,i.YN,i.qT,i.me,i.BC,i.cb,i.X1,i.j4,i.JD,m.Hu,m.RN,m.YY,m.m2,m.MM,m.Lc,m.dh,_.Hl,_.It,_.$z,_.iY,E.m_,E.An,d.RG,d.rl,d.nJ,d.MV,d.TL,d.yw,h.fS,h.fg,F.g7,F.So,C.D6,C.LG,f.iI,f.Wk],styles:[".register-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.register-card[_ngcontent-%COMP%]{width:100%;max-width:500px;box-shadow:0 8px 32px #0000001a}.register-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.register-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;margin-top:16px}.form-row[_ngcontent-%COMP%]{display:flex;gap:16px}.full-width[_ngcontent-%COMP%]{width:100%}.half-width[_ngcontent-%COMP%]{flex:1}.checkbox-section[_ngcontent-%COMP%]{margin:8px 0}.checkbox-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1976d2;text-decoration:none}.checkbox-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.register-actions[_ngcontent-%COMP%]{margin-top:16px}.register-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:48px;font-size:16px}.login-link[_ngcontent-%COMP%]{text-align:center;width:100%;padding:16px}@media (max-width: 600px){.register-container[_ngcontent-%COMP%]{padding:16px}.form-row[_ngcontent-%COMP%]{flex-direction:column}.half-width[_ngcontent-%COMP%]{width:100%}}"]})}}return t})()}}]);