"use strict";(self.webpackChunkcontrol_financiero_frontend=self.webpackChunkcontrol_financiero_frontend||[]).push([[536],{2536:(Ut,k,c)=>{c.r(k),c.d(k,{TransaccionesComponent:()=>Xt});var m=c(177),g=c(9417),l=c(9159),t=c(4438),v=c(1413),E=c(2771),_=c(8834),S=c(2798),M=c(4823),f=c(6600),T=c(2102);function N(i,r){if(1&i&&(t.j41(0,"mat-option",16),t.EFF(1),t.k0s()),2&i){const e=r.$implicit;t.Y8G("value",e),t.R7$(),t.SpI(" ",e," ")}}function G(i,r){if(1&i){const e=t.RV6();t.j41(0,"mat-form-field",13)(1,"mat-select",15),t.bIt("selectionChange",function(o){t.eBV(e);const s=t.XpG(2);return t.Njj(s._changePageSize(o.value))}),t.Z7z(2,N,2,2,"mat-option",16,t.fX1),t.k0s()()}if(2&i){const e=t.XpG(2);t.Y8G("appearance",e._formFieldAppearance)("color",e.color),t.R7$(),t.Y8G("value",e.pageSize)("disabled",e.disabled)("aria-labelledby",e._pageSizeLabelId)("panelClass",e.selectConfig.panelClass||"")("disableOptionCentering",e.selectConfig.disableOptionCentering),t.R7$(),t.Dyx(e._displayedPageSizeOptions)}}function B(i,r){if(1&i&&(t.j41(0,"div",14),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(),t.JRh(e.pageSize)}}function L(i,r){if(1&i&&(t.j41(0,"div",2)(1,"div",12),t.EFF(2),t.k0s(),t.DNE(3,G,4,7,"mat-form-field",13)(4,B,2,1,"div",14),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.BMQ("id",e._pageSizeLabelId),t.R7$(),t.SpI(" ",e._intl.itemsPerPageLabel," "),t.R7$(),t.vxM(3,e._displayedPageSizeOptions.length>1?3:-1),t.R7$(),t.vxM(4,e._displayedPageSizeOptions.length<=1?4:-1)}}function Y(i,r){if(1&i){const e=t.RV6();t.j41(0,"button",17),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.firstPage())}),t.qSk(),t.j41(1,"svg",7),t.nrm(2,"path",18),t.k0s()()}if(2&i){const e=t.XpG();t.Y8G("matTooltip",e._intl.firstPageLabel)("matTooltipDisabled",e._previousButtonsDisabled())("matTooltipPosition","above")("disabled",e._previousButtonsDisabled()),t.BMQ("aria-label",e._intl.firstPageLabel)}}function V(i,r){if(1&i){const e=t.RV6();t.j41(0,"button",19),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.lastPage())}),t.qSk(),t.j41(1,"svg",7),t.nrm(2,"path",20),t.k0s()()}if(2&i){const e=t.XpG();t.Y8G("matTooltip",e._intl.lastPageLabel)("matTooltipDisabled",e._nextButtonsDisabled())("matTooltipPosition","above")("disabled",e._nextButtonsDisabled()),t.BMQ("aria-label",e._intl.lastPageLabel)}}let F=(()=>{class i{constructor(){this.changes=new v.B,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,a,o)=>{if(0==o||0==a)return`0 of ${o}`;const s=e*a;return`${s+1} \u2013 ${s<(o=Math.max(o,0))?Math.min(s+a,o):s+a} of ${o}`}}static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();const X={provide:F,deps:[[new t.Xx1,new t.kdw,F]],useFactory:function H(i){return i||new F}},Q=new t.nKC("MAT_PAGINATOR_DEFAULT_OPTIONS");let J=0,w=(()=>{class i{get pageIndex(){return this._pageIndex}set pageIndex(e){this._pageIndex=Math.max(e||0,0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(e){this._length=e||0,this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=Math.max(e||0,0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(e){this._pageSizeOptions=(e||[]).map(a=>(0,t.Udg)(a,0)),this._updateDisplayedPageSizeOptions()}constructor(e,a,o){if(this._intl=e,this._changeDetectorRef=a,this._pageSizeLabelId="mat-paginator-page-size-label-"+J++,this._isInitialized=!1,this._initializedStream=new E.m(1),this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this.hidePageSize=!1,this.showFirstLastButtons=!1,this.selectConfig={},this.disabled=!1,this.page=new t.bkB,this.initialized=this._initializedStream,this._intlChanges=e.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),o){const{pageSize:s,pageSizeOptions:h,hidePageSize:x,showFirstLastButtons:I}=o;null!=s&&(this._pageSize=s),null!=h&&(this._pageSizeOptions=h),null!=x&&(this.hidePageSize=x),null!=I&&(this.showFirstLastButtons=I)}this._formFieldAppearance=o?.formFieldAppearance||"outline"}ngOnInit(){this._isInitialized=!0,this._updateDisplayedPageSizeOptions(),this._initializedStream.next()}ngOnDestroy(){this._initializedStream.complete(),this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(e)}previousPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(e)}firstPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=0,this._emitPageEvent(e)}lastPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(e)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const e=this.getNumberOfPages()-1;return this.pageIndex<e&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(e){const o=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/e)||0,this.pageSize=e,this._emitPageEvent(o)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._isInitialized&&(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((e,a)=>e-a),this._changeDetectorRef.markForCheck())}_emitPageEvent(e){this.page.emit({previousPageIndex:e,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}static{this.\u0275fac=function(a){return new(a||i)(t.rXU(F),t.rXU(t.gRc),t.rXU(Q,8))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{color:"color",pageIndex:[t.Mj6.HasDecoratorInputTransform,"pageIndex","pageIndex",t.Udg],length:[t.Mj6.HasDecoratorInputTransform,"length","length",t.Udg],pageSize:[t.Mj6.HasDecoratorInputTransform,"pageSize","pageSize",t.Udg],pageSizeOptions:"pageSizeOptions",hidePageSize:[t.Mj6.HasDecoratorInputTransform,"hidePageSize","hidePageSize",t.L39],showFirstLastButtons:[t.Mj6.HasDecoratorInputTransform,"showFirstLastButtons","showFirstLastButtons",t.L39],selectConfig:"selectConfig",disabled:[t.Mj6.HasDecoratorInputTransform,"disabled","disabled",t.L39]},outputs:{page:"page"},exportAs:["matPaginator"],standalone:!0,features:[t.GFd,t.aNF],decls:14,vars:14,consts:[[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-range-actions"],["aria-live","polite",1,"mat-mdc-paginator-range-label"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-previous",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-next",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],[1,"mat-mdc-paginator-page-size-label"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],[1,"mat-mdc-paginator-page-size-value"],["hideSingleSelectionIndicator","",3,"selectionChange","value","disabled","aria-labelledby","panelClass","disableOptionCentering"],[3,"value"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(a,o){1&a&&(t.j41(0,"div",0)(1,"div",1),t.DNE(2,L,5,4,"div",2),t.j41(3,"div",3)(4,"div",4),t.EFF(5),t.k0s(),t.DNE(6,Y,3,5,"button",5),t.j41(7,"button",6),t.bIt("click",function(){return o.previousPage()}),t.qSk(),t.j41(8,"svg",7),t.nrm(9,"path",8),t.k0s()(),t.joV(),t.j41(10,"button",9),t.bIt("click",function(){return o.nextPage()}),t.qSk(),t.j41(11,"svg",7),t.nrm(12,"path",10),t.k0s()(),t.DNE(13,V,3,5,"button",11),t.k0s()()()),2&a&&(t.R7$(2),t.vxM(2,o.hidePageSize?-1:2),t.R7$(3),t.SpI(" ",o._intl.getRangeLabel(o.pageIndex,o.pageSize,o.length)," "),t.R7$(),t.vxM(6,o.showFirstLastButtons?6:-1),t.R7$(),t.Y8G("matTooltip",o._intl.previousPageLabel)("matTooltipDisabled",o._previousButtonsDisabled())("matTooltipPosition","above")("disabled",o._previousButtonsDisabled()),t.BMQ("aria-label",o._intl.previousPageLabel),t.R7$(3),t.Y8G("matTooltip",o._intl.nextPageLabel)("matTooltipDisabled",o._nextButtonsDisabled())("matTooltipPosition","above")("disabled",o._nextButtonsDisabled()),t.BMQ("aria-label",o._intl.nextPageLabel),t.R7$(3),t.vxM(13,o.showFirstLastButtons?13:-1))},dependencies:[T.rl,S.VO,f.wT,_.iY,M.oV],styles:[".mat-mdc-paginator{display:block;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-paginator-container-text-color);background-color:var(--mat-paginator-container-background-color);font-family:var(--mat-paginator-container-text-font);line-height:var(--mat-paginator-container-text-line-height);font-size:var(--mat-paginator-container-text-size);font-weight:var(--mat-paginator-container-text-weight);letter-spacing:var(--mat-paginator-container-text-tracking);--mat-form-field-container-height:var(--mat-paginator-form-field-container-height);--mat-form-field-container-vertical-padding:var(--mat-paginator-form-field-container-vertical-padding)}.mat-mdc-paginator .mat-mdc-select-value{font-size:var(--mat-paginator-select-trigger-text-size)}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap;width:100%;min-height:var(--mat-paginator-container-size)}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:84px}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px;fill:var(--mat-paginator-enabled-icon-color)}.mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon{fill:var(--mat-paginator-disabled-icon-color)}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon,.cdk-high-contrast-active .mat-mdc-paginator-icon{fill:currentColor;fill:CanvasText}.cdk-high-contrast-active .mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}}return i})(),Z=(()=>{class i{static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({providers:[X],imports:[_.Hl,S.Ve,M.uc,w]})}}return i})();var y=c(8617),R=c(7336),K=c(7786),n=c(9969);const W=["mat-sort-header",""],q=["*"];function tt(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",2),t.bIt("@arrowPosition.start",function(){t.eBV(e);const o=t.XpG();return t.Njj(o._disableViewStateAnimation=!0)})("@arrowPosition.done",function(){t.eBV(e);const o=t.XpG();return t.Njj(o._disableViewStateAnimation=!1)}),t.nrm(1,"div",3),t.j41(2,"div",4),t.nrm(3,"div",5)(4,"div",6)(5,"div",7),t.k0s()()}if(2&i){const e=t.XpG();t.Y8G("@arrowOpacity",e._getArrowViewState())("@arrowPosition",e._getArrowViewState())("@allowChildren",e._getArrowDirectionState()),t.R7$(2),t.Y8G("@indicator",e._getArrowDirectionState()),t.R7$(),t.Y8G("@leftPointer",e._getArrowDirectionState()),t.R7$(),t.Y8G("@rightPointer",e._getArrowDirectionState())}}const z=new t.nKC("MAT_SORT_DEFAULT_OPTIONS");let P=(()=>{class i{get direction(){return this._direction}set direction(e){this._direction=e}constructor(e){this._defaultOptions=e,this._initializedStream=new E.m(1),this.sortables=new Map,this._stateChanges=new v.B,this.start="asc",this._direction="",this.disabled=!1,this.sortChange=new t.bkB,this.initialized=this._initializedStream}register(e){this.sortables.set(e.id,e)}deregister(e){this.sortables.delete(e.id)}sort(e){this.active!=e.id?(this.active=e.id,this.direction=e.start?e.start:this.start):this.direction=this.getNextSortDirection(e),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(e){if(!e)return"";let o=function et(i,r){let e=["asc","desc"];return"desc"==i&&e.reverse(),r||e.push(""),e}(e.start||this.start,e?.disableClear??this.disableClear??!!this._defaultOptions?.disableClear),s=o.indexOf(this.direction)+1;return s>=o.length&&(s=0),o[s]}ngOnInit(){this._initializedStream.next()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete(),this._initializedStream.complete()}static{this.\u0275fac=function(a){return new(a||i)(t.rXU(z,8))}}static{this.\u0275dir=t.FsC({type:i,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{active:[t.Mj6.None,"matSortActive","active"],start:[t.Mj6.None,"matSortStart","start"],direction:[t.Mj6.None,"matSortDirection","direction"],disableClear:[t.Mj6.HasDecoratorInputTransform,"matSortDisableClear","disableClear",t.L39],disabled:[t.Mj6.HasDecoratorInputTransform,"matSortDisabled","disabled",t.L39]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],standalone:!0,features:[t.GFd,t.OA$]})}}return i})();const p=f.ed.ENTERING+" "+f.r5.STANDARD_CURVE,u={indicator:(0,n.hZ)("indicator",[(0,n.wk)("active-asc, asc",(0,n.iF)({transform:"translateY(0px)"})),(0,n.wk)("active-desc, desc",(0,n.iF)({transform:"translateY(10px)"})),(0,n.kY)("active-asc <=> active-desc",(0,n.i0)(p))]),leftPointer:(0,n.hZ)("leftPointer",[(0,n.wk)("active-asc, asc",(0,n.iF)({transform:"rotate(-45deg)"})),(0,n.wk)("active-desc, desc",(0,n.iF)({transform:"rotate(45deg)"})),(0,n.kY)("active-asc <=> active-desc",(0,n.i0)(p))]),rightPointer:(0,n.hZ)("rightPointer",[(0,n.wk)("active-asc, asc",(0,n.iF)({transform:"rotate(45deg)"})),(0,n.wk)("active-desc, desc",(0,n.iF)({transform:"rotate(-45deg)"})),(0,n.kY)("active-asc <=> active-desc",(0,n.i0)(p))]),arrowOpacity:(0,n.hZ)("arrowOpacity",[(0,n.wk)("desc-to-active, asc-to-active, active",(0,n.iF)({opacity:1})),(0,n.wk)("desc-to-hint, asc-to-hint, hint",(0,n.iF)({opacity:.54})),(0,n.wk)("hint-to-desc, active-to-desc, desc, hint-to-asc, active-to-asc, asc, void",(0,n.iF)({opacity:0})),(0,n.kY)("* => asc, * => desc, * => active, * => hint, * => void",(0,n.i0)("0ms")),(0,n.kY)("* <=> *",(0,n.i0)(p))]),arrowPosition:(0,n.hZ)("arrowPosition",[(0,n.kY)("* => desc-to-hint, * => desc-to-active",(0,n.i0)(p,(0,n.i7)([(0,n.iF)({transform:"translateY(-25%)"}),(0,n.iF)({transform:"translateY(0)"})]))),(0,n.kY)("* => hint-to-desc, * => active-to-desc",(0,n.i0)(p,(0,n.i7)([(0,n.iF)({transform:"translateY(0)"}),(0,n.iF)({transform:"translateY(25%)"})]))),(0,n.kY)("* => asc-to-hint, * => asc-to-active",(0,n.i0)(p,(0,n.i7)([(0,n.iF)({transform:"translateY(25%)"}),(0,n.iF)({transform:"translateY(0)"})]))),(0,n.kY)("* => hint-to-asc, * => active-to-asc",(0,n.i0)(p,(0,n.i7)([(0,n.iF)({transform:"translateY(0)"}),(0,n.iF)({transform:"translateY(-25%)"})]))),(0,n.wk)("desc-to-hint, asc-to-hint, hint, desc-to-active, asc-to-active, active",(0,n.iF)({transform:"translateY(0)"})),(0,n.wk)("hint-to-desc, active-to-desc, desc",(0,n.iF)({transform:"translateY(-25%)"})),(0,n.wk)("hint-to-asc, active-to-asc, asc",(0,n.iF)({transform:"translateY(25%)"}))]),allowChildren:(0,n.hZ)("allowChildren",[(0,n.kY)("* <=> *",[(0,n.P)("@*",(0,n.MA)(),{optional:!0})])])};let C=(()=>{class i{constructor(){this.changes=new v.B}static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();const at={provide:C,deps:[[new t.Xx1,new t.kdw,C]],useFactory:function it(i){return i||new C}};let ot=(()=>{class i{get sortActionDescription(){return this._sortActionDescription}set sortActionDescription(e){this._updateSortActionDescription(e)}constructor(e,a,o,s,h,x,I,$){this._intl=e,this._changeDetectorRef=a,this._sort=o,this._columnDef=s,this._focusMonitor=h,this._elementRef=x,this._ariaDescriber=I,this._showIndicatorHint=!1,this._viewState={},this._arrowDirection="",this._disableViewStateAnimation=!1,this.arrowPosition="after",this.disabled=!1,this._sortActionDescription="Sort",$?.arrowPosition&&(this.arrowPosition=$?.arrowPosition),this._handleStateChanges()}ngOnInit(){!this.id&&this._columnDef&&(this.id=this._columnDef.name),this._updateArrowDirection(),this._setAnimationTransitionState({toState:this._isSorted()?"active":this._arrowDirection}),this._sort.register(this),this._sortButton=this._elementRef.nativeElement.querySelector(".mat-sort-header-container"),this._updateSortActionDescription(this._sortActionDescription)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{const a=!!e;a!==this._showIndicatorHint&&(this._setIndicatorHintVisible(a),this._changeDetectorRef.markForCheck())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._sort.deregister(this),this._rerenderSubscription.unsubscribe(),this._sortButton&&this._ariaDescriber?.removeDescription(this._sortButton,this._sortActionDescription)}_setIndicatorHintVisible(e){this._isDisabled()&&e||(this._showIndicatorHint=e,this._isSorted()||(this._updateArrowDirection(),this._setAnimationTransitionState(this._showIndicatorHint?{fromState:this._arrowDirection,toState:"hint"}:{fromState:"hint",toState:this._arrowDirection})))}_setAnimationTransitionState(e){this._viewState=e||{},this._disableViewStateAnimation&&(this._viewState={toState:e.toState})}_toggleOnInteraction(){this._sort.sort(this),("hint"===this._viewState.toState||"active"===this._viewState.toState)&&(this._disableViewStateAnimation=!0)}_handleClick(){this._isDisabled()||this._sort.sort(this)}_handleKeydown(e){!this._isDisabled()&&(e.keyCode===R.t6||e.keyCode===R.Fm)&&(e.preventDefault(),this._toggleOnInteraction())}_isSorted(){return this._sort.active==this.id&&("asc"===this._sort.direction||"desc"===this._sort.direction)}_getArrowDirectionState(){return`${this._isSorted()?"active-":""}${this._arrowDirection}`}_getArrowViewState(){const e=this._viewState.fromState;return(e?`${e}-to-`:"")+this._viewState.toState}_updateArrowDirection(){this._arrowDirection=this._isSorted()?this._sort.direction:this.start||this._sort.start}_isDisabled(){return this._sort.disabled||this.disabled}_getAriaSortAttribute(){return this._isSorted()?"asc"==this._sort.direction?"ascending":"descending":"none"}_renderArrow(){return!this._isDisabled()||this._isSorted()}_updateSortActionDescription(e){this._sortButton&&(this._ariaDescriber?.removeDescription(this._sortButton,this._sortActionDescription),this._ariaDescriber?.describe(this._sortButton,e)),this._sortActionDescription=e}_handleStateChanges(){this._rerenderSubscription=(0,K.h)(this._sort.sortChange,this._sort._stateChanges,this._intl.changes).subscribe(()=>{this._isSorted()&&(this._updateArrowDirection(),("hint"===this._viewState.toState||"active"===this._viewState.toState)&&(this._disableViewStateAnimation=!0),this._setAnimationTransitionState({fromState:this._arrowDirection,toState:"active"}),this._showIndicatorHint=!1),!this._isSorted()&&this._viewState&&"active"===this._viewState.toState&&(this._disableViewStateAnimation=!1,this._setAnimationTransitionState({fromState:"active",toState:this._arrowDirection})),this._changeDetectorRef.markForCheck()})}static{this.\u0275fac=function(a){return new(a||i)(t.rXU(C),t.rXU(t.gRc),t.rXU(P,8),t.rXU("MAT_SORT_HEADER_COLUMN_DEF",8),t.rXU(y.FN),t.rXU(t.aKT),t.rXU(y.vr,8),t.rXU(z,8))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["","mat-sort-header",""]],hostAttrs:[1,"mat-sort-header"],hostVars:3,hostBindings:function(a,o){1&a&&t.bIt("click",function(){return o._handleClick()})("keydown",function(h){return o._handleKeydown(h)})("mouseenter",function(){return o._setIndicatorHintVisible(!0)})("mouseleave",function(){return o._setIndicatorHintVisible(!1)}),2&a&&(t.BMQ("aria-sort",o._getAriaSortAttribute()),t.AVh("mat-sort-header-disabled",o._isDisabled()))},inputs:{id:[t.Mj6.None,"mat-sort-header","id"],arrowPosition:"arrowPosition",start:"start",disabled:[t.Mj6.HasDecoratorInputTransform,"disabled","disabled",t.L39],sortActionDescription:"sortActionDescription",disableClear:[t.Mj6.HasDecoratorInputTransform,"disableClear","disableClear",t.L39]},exportAs:["matSortHeader"],standalone:!0,features:[t.GFd,t.aNF],attrs:W,ngContentSelectors:q,decls:4,vars:7,consts:[[1,"mat-sort-header-container","mat-focus-indicator"],[1,"mat-sort-header-content"],[1,"mat-sort-header-arrow"],[1,"mat-sort-header-stem"],[1,"mat-sort-header-indicator"],[1,"mat-sort-header-pointer-left"],[1,"mat-sort-header-pointer-right"],[1,"mat-sort-header-pointer-middle"]],template:function(a,o){1&a&&(t.NAR(),t.j41(0,"div",0)(1,"div",1),t.SdG(2),t.k0s(),t.DNE(3,tt,6,6,"div",2),t.k0s()),2&a&&(t.AVh("mat-sort-header-sorted",o._isSorted())("mat-sort-header-position-before","before"===o.arrowPosition),t.BMQ("tabindex",o._isDisabled()?null:0)("role",o._isDisabled()?null:"button"),t.R7$(3),t.vxM(3,o._renderArrow()?3:-1))},styles:[".mat-sort-header-container{display:flex;cursor:pointer;align-items:center;letter-spacing:normal;outline:0}[mat-sort-header].cdk-keyboard-focused .mat-sort-header-container,[mat-sort-header].cdk-program-focused .mat-sort-header-container{border-bottom:solid 1px currentColor}.mat-sort-header-disabled .mat-sort-header-container{cursor:default}.mat-sort-header-container::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-sort-header-content{text-align:center;display:flex;align-items:center}.mat-sort-header-position-before{flex-direction:row-reverse}.mat-sort-header-arrow{height:12px;width:12px;min-width:12px;position:relative;display:flex;color:var(--mat-sort-arrow-color);opacity:0}.mat-sort-header-arrow,[dir=rtl] .mat-sort-header-position-before .mat-sort-header-arrow{margin:0 0 0 6px}.mat-sort-header-position-before .mat-sort-header-arrow,[dir=rtl] .mat-sort-header-arrow{margin:0 6px 0 0}.mat-sort-header-stem{background:currentColor;height:10px;width:2px;margin:auto;display:flex;align-items:center}.cdk-high-contrast-active .mat-sort-header-stem{width:0;border-left:solid 2px}.mat-sort-header-indicator{width:100%;height:2px;display:flex;align-items:center;position:absolute;top:0;left:0}.mat-sort-header-pointer-middle{margin:auto;height:2px;width:2px;background:currentColor;transform:rotate(45deg)}.cdk-high-contrast-active .mat-sort-header-pointer-middle{width:0;height:0;border-top:solid 2px;border-left:solid 2px}.mat-sort-header-pointer-left,.mat-sort-header-pointer-right{background:currentColor;width:6px;height:2px;position:absolute;top:0}.cdk-high-contrast-active .mat-sort-header-pointer-left,.cdk-high-contrast-active .mat-sort-header-pointer-right{width:0;height:0;border-left:solid 6px;border-top:solid 2px}.mat-sort-header-pointer-left{transform-origin:right;left:0}.mat-sort-header-pointer-right{transform-origin:left;right:0}"],encapsulation:2,data:{animation:[u.indicator,u.leftPointer,u.rightPointer,u.arrowOpacity,u.arrowPosition,u.allowChildren]},changeDetection:0})}}return i})(),nt=(()=>{class i{static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({providers:[at],imports:[f.yE]})}}return i})();var b=c(5596),O=c(9213),rt=c(9631),st=c(5084),j=c(5351),ct=c(5416),lt=c(6471),A=c(9183),d=c(6977),D=c(152),dt=c(3294),ht=c(1612),gt=c(2785),pt=c(5435),mt=c(562),ft=c(5567);const ut=(i,r,e)=>({"ingreso-chip":i,"gasto-chip":r,"transferencia-chip":e}),_t=(i,r,e)=>({"ingreso-text":i,"gasto-text":r,"transferencia-text":e}),bt=(i,r)=>({"ingreso-row":i,"gasto-row":r}),vt=()=>[10,25,50,100];function St(i,r){if(1&i&&(t.j41(0,"mat-option",25),t.EFF(1),t.k0s()),2&i){const e=r.$implicit;t.Y8G("value",e._id),t.R7$(),t.SpI(" ",e.nombre," ")}}function Tt(i,r){if(1&i&&(t.j41(0,"mat-option",25),t.EFF(1),t.k0s()),2&i){const e=r.$implicit,a=t.XpG();t.Y8G("value",e),t.R7$(),t.SpI(" ",a.formatearCategoria(e)," ")}}function Ft(i,r){if(1&i){const e=t.RV6();t.j41(0,"button",26),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.debugFiltros())}),t.j41(1,"mat-icon"),t.EFF(2,"bug_report"),t.k0s(),t.EFF(3," Debug "),t.k0s()}}function Ct(i,r){1&i&&(t.j41(0,"div",27),t.nrm(1,"mat-spinner",28),t.j41(2,"p"),t.EFF(3,"Cargando transacciones..."),t.k0s()()),2&i&&(t.R7$(),t.Y8G("diameter",40))}function Dt(i,r){1&i&&(t.j41(0,"th",45),t.EFF(1," Fecha "),t.k0s())}function xt(i,r){if(1&i&&(t.j41(0,"td",46),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&i){const e=r.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,e.fecha,"dd/MM/yyyy")," ")}}function It(i,r){1&i&&(t.j41(0,"th",45),t.EFF(1," Descripci\xf3n "),t.k0s())}function wt(i,r){if(1&i&&(t.j41(0,"small",50),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.notas)}}function Pt(i,r){if(1&i&&(t.j41(0,"span",53),t.EFF(1),t.k0s()),2&i){const e=r.$implicit;t.R7$(),t.SpI(" ",e," ")}}function kt(i,r){if(1&i&&(t.j41(0,"div",51),t.DNE(1,Pt,2,1,"span",52),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.Y8G("ngForOf",e.etiquetas)}}function Et(i,r){if(1&i&&(t.j41(0,"td",46)(1,"div",47)(2,"strong"),t.EFF(3),t.k0s(),t.DNE(4,wt,2,1,"small",48)(5,kt,2,1,"div",49),t.k0s()()),2&i){const e=r.$implicit;t.R7$(3),t.JRh(e.descripcion),t.R7$(),t.Y8G("ngIf",e.notas),t.R7$(),t.Y8G("ngIf",e.etiquetas&&e.etiquetas.length>0)}}function Mt(i,r){1&i&&(t.j41(0,"th",54),t.EFF(1," Fondo "),t.k0s())}function yt(i,r){if(1&i&&(t.j41(0,"td",46),t.EFF(1),t.k0s()),2&i){const e=r.$implicit,a=t.XpG(2);t.R7$(),t.SpI(" ",a.obtenerNombreFondo(e)," ")}}function Rt(i,r){1&i&&(t.j41(0,"th",45),t.EFF(1," Categor\xeda "),t.k0s())}function zt(i,r){if(1&i&&(t.j41(0,"td",46)(1,"span",55),t.EFF(2),t.k0s()()),2&i){const e=r.$implicit,a=t.XpG(2);t.R7$(),t.Y8G("ngClass","ingreso"===e.tipo?"ingreso-chip":"gasto-chip"),t.R7$(),t.SpI(" ",a.formatearCategoria(e.categoria)," ")}}function Ot(i,r){1&i&&(t.j41(0,"th",45),t.EFF(1," Tipo "),t.k0s())}function jt(i,r){if(1&i&&(t.j41(0,"td",46)(1,"span",56)(2,"mat-icon"),t.EFF(3),t.k0s(),t.EFF(4),t.nI1(5,"titlecase"),t.k0s()()),2&i){const e=r.$implicit;t.R7$(),t.Y8G("ngClass",t.sMw(5,ut,"ingreso"===e.tipo&&"transferencia"!==e.categoria,"gasto"===e.tipo&&"transferencia"!==e.categoria,"transferencia"===e.categoria)),t.R7$(2),t.JRh("transferencia"===e.categoria?"swap_horiz":"ingreso"===e.tipo?"trending_up":"trending_down"),t.R7$(),t.SpI(" ","transferencia"===e.categoria?"Transferencia":t.bMT(5,3,e.tipo)," ")}}function At(i,r){1&i&&(t.j41(0,"th",45),t.EFF(1," Monto "),t.k0s())}function $t(i,r){if(1&i&&(t.j41(0,"td",57)(1,"strong"),t.EFF(2),t.nI1(3,"currency"),t.nI1(4,"currency"),t.k0s()()),2&i){const e=r.$implicit;t.Y8G("ngClass",t.sMw(12,_t,"ingreso"===e.tipo&&"transferencia"!==e.categoria,"gasto"===e.tipo&&"transferencia"!==e.categoria,"transferencia"===e.categoria)),t.R7$(2),t.JRh("transferencia"===e.categoria?t.ii3(3,2,e.monto,"COP","symbol","1.0-0"):("ingreso"===e.tipo?"+":"-")+t.ii3(4,7,e.monto,"COP","symbol","1.0-0"))}}function Nt(i,r){1&i&&(t.j41(0,"th",54),t.EFF(1," Acciones "),t.k0s())}function Gt(i,r){if(1&i){const e=t.RV6();t.j41(0,"td",46)(1,"button",58),t.bIt("click",function(){const o=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.editarTransaccion(o))}),t.j41(2,"mat-icon"),t.EFF(3,"edit"),t.k0s()(),t.j41(4,"button",59),t.bIt("click",function(){const o=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.eliminarTransaccion(o))}),t.j41(5,"mat-icon"),t.EFF(6,"delete"),t.k0s()()()}}function Bt(i,r){1&i&&t.nrm(0,"tr",60)}function Lt(i,r){if(1&i&&t.nrm(0,"tr",61),2&i){const e=r.$implicit;t.Y8G("ngClass",t.l_i(1,bt,"ingreso"===e.tipo,"gasto"===e.tipo))}}function Yt(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",62)(1,"mat-icon"),t.EFF(2,"info"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No hay transacciones"),t.k0s(),t.j41(5,"p"),t.EFF(6),t.k0s(),t.j41(7,"button",3),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.abrirDialogoTransaccion())}),t.j41(8,"mat-icon"),t.EFF(9,"add"),t.k0s(),t.EFF(10," Nueva Transacci\xf3n "),t.k0s()()}if(2&i){const e=t.XpG(2);t.R7$(6),t.JRh(e.filtrosAplicados?"No se encontraron transacciones con los filtros aplicados":"Crea tu primera transacci\xf3n para comenzar")}}function Vt(i,r){if(1&i&&(t.j41(0,"div",29)(1,"table",30),t.qex(2,31),t.DNE(3,Dt,2,0,"th",32)(4,xt,3,4,"td",33),t.bVm(),t.qex(5,34),t.DNE(6,It,2,0,"th",32)(7,Et,6,3,"td",33),t.bVm(),t.qex(8,35),t.DNE(9,Mt,2,0,"th",36)(10,yt,2,1,"td",33),t.bVm(),t.qex(11,37),t.DNE(12,Rt,2,0,"th",32)(13,zt,3,2,"td",33),t.bVm(),t.qex(14,38),t.DNE(15,Ot,2,0,"th",32)(16,jt,6,9,"td",33),t.bVm(),t.qex(17,39),t.DNE(18,At,2,0,"th",32)(19,$t,5,16,"td",40),t.bVm(),t.qex(20,41),t.DNE(21,Nt,2,0,"th",36)(22,Gt,7,0,"td",33),t.bVm(),t.DNE(23,Bt,1,0,"tr",42)(24,Lt,1,4,"tr",43),t.k0s(),t.DNE(25,Yt,11,1,"div",44),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Y8G("dataSource",e.dataSource),t.R7$(22),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",e.displayedColumns),t.R7$(),t.Y8G("ngIf",0===e.dataSource.data.length)}}function Ht(i,r){if(1&i){const e=t.RV6();t.j41(0,"mat-paginator",63),t.bIt("page",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.onPageChange(o))}),t.k0s()}if(2&i){const e=t.XpG();t.Y8G("pageSizeOptions",t.lJ4(5,vt))("pageSize",e.pageSize)("pageIndex",e.currentPage-1)("length",e.totalTransacciones)("showFirstLastButtons",!0)}}let Xt=(()=>{class i{constructor(e,a,o,s,h){this.fb=e,this.transaccionService=a,this.fondoService=o,this.dialog=s,this.notificationService=h,this.destroy$=new v.B,this.displayedColumns=["fecha","descripcion","fondo","categoria","tipo","monto","acciones"],this.dataSource=new l.I6,this.fondos=[],this.categorias=[],this.transacciones=[],this.totalTransacciones=0,this.currentPage=1,this.pageSize=10,this.loading=!1,this.filtrosAplicados=!1,this.totalIngresos=0,this.totalGastos=0,this.balance=0,this.totalTransferencias=0,this.filtrosForm=this.fb.group({busqueda:[""],fondoId:[""],tipo:[""],categoria:[""]})}crearTransferencia(e){console.log("\u{1f504} Iniciando creaci\xf3n de transferencia en componente:",e);const a=this.fondos.find(s=>s._id===e.fondoOrigenId),o=this.fondos.find(s=>s._id===e.fondoDestinoId);a&&o?a.saldoActual<e.monto?this.notificationService.warning(`Saldo insuficiente en "${a.nombre}". Saldo disponible: ${a.saldoActual.toLocaleString()}, monto a transferir: ${e.monto.toLocaleString()}`):this.transaccionService.crearTransferencia(e).pipe((0,d.Q)(this.destroy$)).subscribe({next:s=>{console.log("\u2705 Transferencia creada exitosamente en componente:",s),this.notificationService.success(`Transferencia de ${e.monto.toLocaleString()} desde "${a.nombre}" hacia "${o.nombre}" realizada correctamente`),this.cargarTransacciones(),this.cargarDatosIniciales()},error:s=>{console.error("\u274c Error al crear transferencia en componente:",s),this.notificationService.error(s.message||"Error al crear la transferencia")}}):this.notificationService.error("Uno de los fondos seleccionados no existe")}ngOnInit(){console.log("\u{1f680} Iniciando componente de transacciones..."),this.cargarDatosIniciales(),this.configurarFiltrosBusqueda(),setTimeout(()=>this.cargarTransacciones(),1e3)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}configurarFiltrosBusqueda(){this.filtrosForm.get("busqueda")?.valueChanges.pipe((0,D.B)(300),(0,dt.F)(),(0,d.Q)(this.destroy$)).subscribe(()=>{this.aplicarFiltros()}),this.filtrosForm.get("tipo")?.valueChanges.pipe((0,d.Q)(this.destroy$)).subscribe(()=>{this.filtrosForm.get("categoria")?.setValue("")}),this.filtrosForm.get("fondoId")?.valueChanges.pipe((0,D.B)(100),(0,d.Q)(this.destroy$)).subscribe(e=>{console.log("\u{1f3e6} Fondo seleccionado cambiado a:",e),this.aplicarFiltros()}),this.filtrosForm.get("categoria")?.valueChanges.pipe((0,D.B)(100),(0,d.Q)(this.destroy$)).subscribe(e=>{console.log("\u{1f3f7}\ufe0f Categor\xeda seleccionada cambiada a:",e),this.aplicarFiltros()}),this.filtrosForm.get("tipo")?.valueChanges.pipe((0,D.B)(100),(0,d.Q)(this.destroy$)).subscribe(e=>{console.log("\u{1f4cb} Tipo seleccionado cambiado a:",e),this.filtrosForm.get("categoria")?.setValue("",{emitEvent:!1}),this.aplicarFiltros()})}cargarDatosIniciales(){console.log("\u{1f3e6} Cargando fondos para transacciones..."),this.fondoService.obtenerFondos().pipe((0,d.Q)(this.destroy$)).subscribe({next:e=>{console.log("\u2705 Fondos cargados directamente:",e),this.fondos=e,e.length>0&&(console.log("\u{1f4c4} Cargando transacciones ahora que tenemos fondos..."),this.cargarTransacciones())},error:e=>{console.error("\u274c Error al cargar fondos directamente:",e),this.notificationService.error("Error al cargar fondos")}}),this.fondoService.fondos$.pipe((0,d.Q)(this.destroy$)).subscribe({next:e=>{e.length>0&&(console.log("\u2705 Fondos actualizados desde observable:",e),this.fondos=e)},error:e=>{console.error("\u274c Error en observable de fondos:",e)}}),this.categorias=this.transaccionService.obtenerCategorias(),console.log("\u{1f3f7}\ufe0f Categor\xedas disponibles:",this.categorias)}cargarTransacciones(){if(console.log("\u{1f4c4} Cargando transacciones... Fondos disponibles:",this.fondos.length),0===this.fondos.length)return console.log("\u26a0\ufe0f No hay fondos cargados a\xfan, reintentando en 500ms..."),void setTimeout(()=>this.cargarTransacciones(),500);this.loading=!0;const e=this.construirFiltros();this.transaccionService.obtenerTransacciones(e).pipe((0,d.Q)(this.destroy$)).subscribe({next:a=>{console.log("\u2705 Respuesta de transacciones:",a),this.transacciones=a.transacciones,this.totalTransacciones=a.total,this.dataSource.data=this.transacciones,this.calcularEstadisticas(),this.loading=!1,this.transacciones.forEach(o=>{console.log(`Transacci\xf3n "${o.descripcion}" tiene fondoId: ${o.fondoId}`);const s=this.fondos.find(h=>h._id===o.fondoId);console.log("Fondo encontrado:",s?s.nombre:"NO ENCONTRADO")})},error:a=>{console.error("\u274c Error al cargar transacciones:",a),this.notificationService.error("Error al cargar transacciones"),this.loading=!1}})}construirFiltros(){const e=this.filtrosForm.value,a={page:this.currentPage,limit:this.pageSize};return e.busqueda&&(a.busqueda=e.busqueda),e.fondoId&&(a.fondoId=e.fondoId,console.log("\u{1f50d} Filtro por fondo aplicado:",e.fondoId)),e.tipo&&(a.tipo=e.tipo),e.categoria&&(a.categoria=e.categoria),console.log("\u{1f4cb} Filtros construidos:",a),this.filtrosAplicados=Object.keys(a).length>2,a}calcularEstadisticas(){this.totalIngresos=this.transacciones.filter(e=>"ingreso"===e.tipo&&"transferencia"!==e.categoria).reduce((e,a)=>e+a.monto,0),this.totalGastos=this.transacciones.filter(e=>"gasto"===e.tipo&&"transferencia"!==e.categoria).reduce((e,a)=>e+a.monto,0),this.balance=this.totalIngresos-this.totalGastos,this.totalTransferencias=this.transacciones.filter(e=>"transferencia"===e.categoria).length,console.log("\u{1f4ca} Estad\xedsticas calculadas (sin transferencias):",{totalIngresos:this.totalIngresos,totalGastos:this.totalGastos,balance:this.balance,transferencias:this.totalTransferencias})}aplicarFiltros(){this.currentPage=1,this.cargarTransacciones()}limpiarFiltros(){this.filtrosForm.reset(),this.currentPage=1,this.cargarTransacciones()}onPageChange(e){console.log("\u{1f4c4} Cambio de p\xe1gina:",e),this.currentPage=e.pageIndex+1,this.pageSize=e.pageSize,this.cargarTransacciones()}abrirDialogoTransaccion(e){0!==this.fondos.length?this.dialog.open(gt.p,{width:"600px",maxWidth:"90vw",data:{transaccion:e,fondos:this.fondos,categorias:this.categorias}}).afterClosed().subscribe(o=>{o&&"save"===o.action?e?this.actualizarTransaccion(e._id,o.data):this.crearTransaccion(o.data):o&&"transfer"===o.action&&this.crearTransferencia(o.data)}):this.notificationService.warning("Debe crear al menos un fondo antes de realizar transacciones.")}crearTransaccion(e){if("gasto"===e.tipo){const a=this.fondos.find(o=>o._id===e.fondoId);a&&a.saldoActual<e.monto&&this.notificationService.warning(`Advertencia: El gasto de ${e.monto.toLocaleString()} excede el saldo disponible de ${a.saldoActual.toLocaleString()}. El fondo quedar\xe1 en saldo negativo.`)}this.transaccionService.crearTransaccion(e).pipe((0,d.Q)(this.destroy$)).subscribe({next:()=>{this.notificationService.success("Transacci\xf3n creada correctamente"),this.cargarTransacciones()},error:a=>{console.error("Error al crear transacci\xf3n:",a),this.notificationService.error("Error al crear la transacci\xf3n")}})}actualizarTransaccion(e,a){console.log("\u{1f504} Iniciando actualizaci\xf3n de transacci\xf3n en componente:",{id:e,data:a}),this.transaccionService.actualizarTransaccion(e,a).pipe((0,d.Q)(this.destroy$)).subscribe({next:o=>{console.log("\u2705 Transacci\xf3n actualizada exitosamente en componente:",o),this.notificationService.success("Transacci\xf3n actualizada correctamente"),this.cargarTransacciones()},error:o=>{console.error("\u274c Error al actualizar transacci\xf3n en componente:",o),this.notificationService.error("Error al actualizar la transacci\xf3n")}})}editarTransaccion(e){this.abrirDialogoTransaccion(e)}eliminarTransaccion(e){console.log("\u{1f5d1}\ufe0f Iniciando eliminaci\xf3n de transacci\xf3n en componente:",e),confirm(`\xbfEst\xe1s seguro de que deseas eliminar la transacci\xf3n "${e.descripcion}"?`)?(console.log("\u2705 Usuario confirm\xf3 eliminaci\xf3n, procediendo..."),this.transaccionService.eliminarTransaccion(e._id).pipe((0,d.Q)(this.destroy$)).subscribe({next:a=>{console.log("\u2705 Transacci\xf3n eliminada exitosamente en componente:",a),this.notificationService.success("Transacci\xf3n eliminada correctamente"),this.cargarTransacciones()},error:a=>{console.error("\u274c Error al eliminar transacci\xf3n en componente:",a),this.notificationService.error("Error al eliminar la transacci\xf3n")}})):console.log("\u274c Usuario cancel\xf3 la eliminaci\xf3n")}obtenerNombreFondo(e){if(e._fondoNombre)return e._fondoNombre;if(0===this.fondos.length)return this.cargarFondosSincrono(),"Cargando...";const a=this.fondos.find(o=>o._id===e.fondoId);return a?a.nombre:`ID: ${e.fondoId.substring(0,8)}...`}formatearCategoria(e){return ht.d.formatearCategoria(e)}obtenerCategoriasFiltradas(){const e=this.filtrosForm.get("tipo")?.value;return e?this.transaccionService.obtenerCategoriasPorTipo(e).filter(a=>"transferencia"!==a):this.categorias.filter(a=>"transferencia"!==a)}debugFiltros(){console.log("\u{1f50d} === DEBUG FILTROS ==="),console.log("\u{1f4cb} Valores del formulario:",this.filtrosForm.value),console.log("\u{1f3e6} Fondos disponibles:",this.fondos.map(a=>({id:a._id,nombre:a.nombre}))),console.log("\u{1f3f7}\ufe0f Categor\xedas disponibles:",this.categorias);const e=this.construirFiltros();console.log("\u{1f527} Filtros construidos:",e),console.log("\u{1f3af} Filtros aplicados:",this.filtrosAplicados),console.log("\u{1f4ca} Total transacciones:",this.totalTransacciones),console.log("\u{1f4c4} Transacciones actuales:",this.transacciones.length),this.transacciones.length>0&&console.log("\u{1f50d} Primeras 3 transacciones:",this.transacciones.slice(0,3).map(a=>({desc:a.descripcion,fondoId:a.fondoId,tipo:a.tipo,categoria:a.categoria}))),console.log("\u{1f50d} === FIN DEBUG ===")}cargarFondosSincrono(){const e=localStorage.getItem("fondos_cache");if(e)try{return void(this.fondos=JSON.parse(e))}catch{console.warn("Error parseando cache de fondos")}this.fondoService.obtenerFondos().subscribe({next:a=>{this.fondos=a},error:a=>{console.error("Error cargando fondos para obtenerNombreFondo:",a)}})}static{this.\u0275fac=function(a){return new(a||i)(t.rXU(g.ok),t.rXU(pt.j),t.rXU(mt.Y),t.rXU(j.bZ),t.rXU(ft.J))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-transacciones"]],viewQuery:function(a,o){if(1&a&&(t.GBs(w,5),t.GBs(P,5)),2&a){let s;t.mGM(s=t.lsd())&&(o.paginator=s.first),t.mGM(s=t.lsd())&&(o.sort=s.first)}},standalone:!0,features:[t.aNF],decls:59,vars:7,consts:[[1,"transacciones-container"],[1,"filtros-card","mb-2"],[1,"spacer"],["mat-raised-button","","color","primary",3,"click"],[1,"filtros-form",3,"formGroup"],["appearance","outline"],["formControlName","fondoId"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","tipo"],["value","ingreso"],[1,"option-icon","ingreso"],["value","gasto"],[1,"option-icon","gasto"],["formControlName","categoria"],["value","transferencia"],[1,"option-icon","transferencia"],[1,"filter-actions"],["mat-raised-button","","color","accent",3,"click"],["mat-button","",3,"click"],["mat-stroked-button","","color","warn",3,"click",4,"ngIf"],[1,"tabla-card"],["class","loading-container",4,"ngIf"],["class","table-container",4,"ngIf"],["aria-label","Seleccionar p\xe1gina de transacciones",3,"pageSizeOptions","pageSize","pageIndex","length","showFirstLastButtons","page",4,"ngIf"],[3,"value"],["mat-stroked-button","","color","warn",3,"click"],[1,"loading-container"],[3,"diameter"],[1,"table-container"],["mat-table","","matSort","",1,"full-width",3,"dataSource"],["matColumnDef","fecha"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","descripcion"],["matColumnDef","fondo"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","categoria"],["matColumnDef","tipo"],["matColumnDef","monto"],["mat-cell","",3,"ngClass",4,"matCellDef"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass",4,"matRowDef","matRowDefColumns"],["class","no-data",4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"descripcion-cell"],["class","notas",4,"ngIf"],["class","etiquetas",4,"ngIf"],[1,"notas"],[1,"etiquetas"],["class","etiqueta-chip",4,"ngFor","ngForOf"],[1,"etiqueta-chip"],["mat-header-cell",""],[1,"categoria-chip",3,"ngClass"],[1,"tipo-chip",3,"ngClass"],["mat-cell","",3,"ngClass"],["mat-icon-button","","color","primary","matTooltip","Editar transacci\xf3n",3,"click"],["mat-icon-button","","color","warn","matTooltip","Eliminar transacci\xf3n",3,"click"],["mat-header-row",""],["mat-row","",3,"ngClass"],[1,"no-data"],["aria-label","Seleccionar p\xe1gina de transacciones",3,"page","pageSizeOptions","pageSize","pageIndex","length","showFirstLastButtons"]],template:function(a,o){1&a&&(t.j41(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),t.EFF(4,"Transacciones"),t.k0s(),t.nrm(5,"div",2),t.j41(6,"button",3),t.bIt("click",function(){return o.abrirDialogoTransaccion()}),t.j41(7,"mat-icon"),t.EFF(8,"add"),t.k0s(),t.EFF(9," Nueva Transacci\xf3n "),t.k0s()(),t.j41(10,"mat-card-content")(11,"form",4)(12,"mat-form-field",5)(13,"mat-label"),t.EFF(14,"Fondo"),t.k0s(),t.j41(15,"mat-select",6)(16,"mat-option",7),t.EFF(17,"Todos los fondos"),t.k0s(),t.DNE(18,St,2,2,"mat-option",8),t.k0s()(),t.j41(19,"mat-form-field",5)(20,"mat-label"),t.EFF(21,"Tipo"),t.k0s(),t.j41(22,"mat-select",9)(23,"mat-option",7),t.EFF(24,"Todos"),t.k0s(),t.j41(25,"mat-option",10)(26,"mat-icon",11),t.EFF(27,"trending_up"),t.k0s(),t.EFF(28," Ingreso "),t.k0s(),t.j41(29,"mat-option",12)(30,"mat-icon",13),t.EFF(31,"trending_down"),t.k0s(),t.EFF(32," Gasto "),t.k0s()()(),t.j41(33,"mat-form-field",5)(34,"mat-label"),t.EFF(35,"Categor\xeda"),t.k0s(),t.j41(36,"mat-select",14)(37,"mat-option",7),t.EFF(38,"Todas"),t.k0s(),t.DNE(39,Tt,2,2,"mat-option",8),t.j41(40,"mat-option",15)(41,"mat-icon",16),t.EFF(42,"swap_horiz"),t.k0s(),t.EFF(43," Transferencias "),t.k0s()()(),t.j41(44,"div",17)(45,"button",18),t.bIt("click",function(){return o.aplicarFiltros()}),t.j41(46,"mat-icon"),t.EFF(47,"filter_list"),t.k0s(),t.EFF(48," Filtrar "),t.k0s(),t.j41(49,"button",19),t.bIt("click",function(){return o.limpiarFiltros()}),t.j41(50,"mat-icon"),t.EFF(51,"clear"),t.k0s(),t.EFF(52," Limpiar "),t.k0s(),t.DNE(53,Ft,4,0,"button",20),t.k0s()()()(),t.j41(54,"mat-card",21)(55,"mat-card-content"),t.DNE(56,Ct,4,1,"div",22)(57,Vt,26,4,"div",23)(58,Ht,1,6,"mat-paginator",24),t.k0s()()()),2&a&&(t.R7$(11),t.Y8G("formGroup",o.filtrosForm),t.R7$(7),t.Y8G("ngForOf",o.fondos),t.R7$(21),t.Y8G("ngForOf",o.obtenerCategoriasFiltradas()),t.R7$(14),t.Y8G("ngIf",!1),t.R7$(3),t.Y8G("ngIf",o.loading),t.R7$(),t.Y8G("ngIf",!o.loading),t.R7$(),t.Y8G("ngIf",!o.loading&&o.dataSource.data.length>0))},dependencies:[m.MD,m.YU,m.Sq,m.bT,m.PV,m.oe,m.vh,g.YN,g.qT,g.BC,g.cb,g.X1,g.j4,g.JD,l.tP,l.Zl,l.tL,l.ji,l.cC,l.YV,l.iL,l.KS,l.$R,l.YZ,l.NB,Z,w,nt,P,ot,b.Hu,b.RN,b.m2,b.MM,b.dh,_.Hl,_.$z,_.iY,O.m_,O.An,T.RG,T.rl,T.nJ,rt.fS,S.Ve,S.VO,f.wT,st.X6,f.WX,j.hM,ct._T,lt.YN,A.D6,A.LG],styles:[".transacciones-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.filtros-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{display:flex;align-items:center}.filtros-form[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center;flex-wrap:wrap;margin-top:16px}.filtros-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{min-width:150px}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.categoria-chip[_ngcontent-%COMP%], .tipo-chip[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:.75em;font-weight:500}.ingreso-chip[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.gasto-chip[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.transferencia-chip[_ngcontent-%COMP%]{background-color:#2196f3;color:#fff}.ingreso-text[_ngcontent-%COMP%]{color:#4caf50;font-weight:500}.gasto-text[_ngcontent-%COMP%]{color:#f44336;font-weight:500}.transferencia-text[_ngcontent-%COMP%]{color:#2196f3;font-weight:500}@media (max-width: 768px){.transacciones-container[_ngcontent-%COMP%]{padding:16px}.filtros-form[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filtros-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{min-width:auto}}"]})}}return i})()}}]);