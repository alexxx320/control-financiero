"use strict";(self.webpackChunkcontrol_financiero_frontend=self.webpackChunkcontrol_financiero_frontend||[]).push([[151],{7151:(R,g,e)=>{e.r(g),e.d(g,{LoginComponent:()=>L});var p=e(177),r=e(9417),a=e(5596),_=e(8834),f=e(9213),c=e(2102),h=e(9631),E=e(2765),F=e(9183),P=e(1997),d=e(8498),n=e(4438),M=e(8010),O=e(5567);function v(i,u){1&i&&(n.j41(0,"mat-error"),n.EFF(1," El email es requerido "),n.k0s())}function D(i,u){1&i&&(n.j41(0,"mat-error"),n.EFF(1," Ingresa un email v\xe1lido "),n.k0s())}function I(i,u){1&i&&(n.j41(0,"mat-error"),n.EFF(1," La contrase\xf1a es requerida "),n.k0s())}function x(i,u){1&i&&n.nrm(0,"mat-spinner",17),2&i&&n.Y8G("diameter",20)}function b(i,u){1&i&&(n.j41(0,"mat-icon"),n.EFF(1,"login"),n.k0s())}let L=(()=>{class i{constructor(s,o,t,l,m){this.fb=s,this.authService=o,this.notificationService=t,this.router=l,this.route=m,this.hidePassword=!0,this.loading=!1,this.returnUrl="/dashboard",this.loginForm=this.fb.group({email:["",[r.k0.required,r.k0.email]],password:["",[r.k0.required]],recordarme:[!1]})}ngOnInit(){this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/dashboard",this.authService.isAuthenticated()&&this.router.navigate([this.returnUrl])}login(){this.loginForm.invalid||this.loading||(this.loading=!0,this.authService.login({email:this.loginForm.value.email,password:this.loginForm.value.password}).subscribe({next:o=>{const t=o.usuario.nombre||o.usuario.email.split("@")[0];this.notificationService.success(`\xa1Bienvenido, ${t}!`),this.router.navigate([this.returnUrl])},error:o=>{console.error("Error en login:",o);let t="Error al iniciar sesi\xf3n";401===o.status?t="Email o contrase\xf1a incorrectos":0===o.status&&(t="No se pudo conectar con el servidor"),this.notificationService.error(t),this.loading=!1},complete:()=>{this.loading=!1}}))}recuperarPassword(s){s.preventDefault(),this.notificationService.info("Funci\xf3n de recuperaci\xf3n de contrase\xf1a en desarrollo")}static{this.\u0275fac=function(o){return new(o||i)(n.rXU(r.ok),n.rXU(M.u),n.rXU(O.J),n.rXU(d.Ix),n.rXU(d.nX))}}static{this.\u0275cmp=n.VBU({type:i,selectors:[["app-login"]],standalone:!0,features:[n.aNF],decls:47,vars:10,consts:[[1,"login-container"],[1,"login-card"],[1,"login-form",3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","type","email","formControlName","email","placeholder","tu@email.com","autocomplete","email"],["matSuffix",""],[4,"ngIf"],["matInput","","formControlName","password","autocomplete","current-password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[1,"form-options"],["formControlName","recordarme"],["href","#",1,"forgot-password",3,"click"],[1,"login-actions"],["mat-raised-button","","color","primary","type","submit",1,"full-width","login-button",3,"disabled"],[3,"diameter",4,"ngIf"],[1,"register-section"],["mat-stroked-button","","color","primary","routerLink","/register",1,"full-width"],[3,"diameter"]],template:function(o,t){if(1&o&&(n.j41(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),n.EFF(5,"account_balance_wallet"),n.k0s(),n.EFF(6," Control Financiero "),n.k0s(),n.j41(7,"mat-card-subtitle"),n.EFF(8,"Inicia sesi\xf3n para continuar"),n.k0s()(),n.j41(9,"mat-card-content")(10,"form",2),n.bIt("ngSubmit",function(){return t.login()}),n.j41(11,"mat-form-field",3)(12,"mat-label"),n.EFF(13,"Email"),n.k0s(),n.nrm(14,"input",4),n.j41(15,"mat-icon",5),n.EFF(16,"email"),n.k0s(),n.DNE(17,v,2,0,"mat-error",6)(18,D,2,0,"mat-error",6),n.k0s(),n.j41(19,"mat-form-field",3)(20,"mat-label"),n.EFF(21,"Contrase\xf1a"),n.k0s(),n.nrm(22,"input",7),n.j41(23,"button",8),n.bIt("click",function(){return t.hidePassword=!t.hidePassword}),n.j41(24,"mat-icon"),n.EFF(25),n.k0s()(),n.DNE(26,I,2,0,"mat-error",6),n.k0s(),n.j41(27,"div",9)(28,"mat-checkbox",10),n.EFF(29," Recordarme "),n.k0s(),n.j41(30,"a",11),n.bIt("click",function(m){return t.recuperarPassword(m)}),n.EFF(31," \xbfOlvidaste tu contrase\xf1a? "),n.k0s()(),n.j41(32,"div",12)(33,"button",13),n.DNE(34,x,1,1,"mat-spinner",14)(35,b,2,0,"mat-icon",6),n.j41(36,"span"),n.EFF(37),n.k0s()()()()(),n.nrm(38,"mat-divider"),n.j41(39,"mat-card-actions")(40,"div",15)(41,"p"),n.EFF(42,"\xbfNo tienes cuenta?"),n.k0s(),n.j41(43,"button",16)(44,"mat-icon"),n.EFF(45,"person_add"),n.k0s(),n.EFF(46," Crear Cuenta "),n.k0s()()()()()),2&o){let l,m,C;n.R7$(10),n.Y8G("formGroup",t.loginForm),n.R7$(7),n.Y8G("ngIf",null==(l=t.loginForm.get("email"))?null:l.hasError("required")),n.R7$(),n.Y8G("ngIf",null==(m=t.loginForm.get("email"))?null:m.hasError("email")),n.R7$(4),n.Y8G("type",t.hidePassword?"password":"text"),n.R7$(3),n.JRh(t.hidePassword?"visibility_off":"visibility"),n.R7$(),n.Y8G("ngIf",null==(C=t.loginForm.get("password"))?null:C.hasError("required")),n.R7$(7),n.Y8G("disabled",t.loginForm.invalid||t.loading),n.R7$(),n.Y8G("ngIf",t.loading),n.R7$(),n.Y8G("ngIf",!t.loading),n.R7$(2),n.JRh(t.loading?"Iniciando sesi\xf3n...":"Iniciar Sesi\xf3n")}},dependencies:[p.MD,p.bT,r.YN,r.qT,r.me,r.BC,r.cb,r.X1,r.j4,r.JD,a.Hu,a.RN,a.YY,a.m2,a.MM,a.Lc,a.dh,_.Hl,_.$z,_.iY,f.m_,f.An,c.RG,c.rl,c.nJ,c.TL,c.yw,h.fS,h.fg,E.g7,E.So,F.D6,F.LG,P.w,P.q,d.iI,d.Wk],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.login-card[_ngcontent-%COMP%]{width:100%;max-width:400px;box-shadow:0 8px 32px #0000001a}.login-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#1976d2}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;margin-top:16px}.full-width[_ngcontent-%COMP%]{width:100%}.form-options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:8px 0}.forgot-password[_ngcontent-%COMP%]{color:#1976d2;text-decoration:none;font-size:.9em}.forgot-password[_ngcontent-%COMP%]:hover{text-decoration:underline}.login-actions[_ngcontent-%COMP%]{margin-top:16px}.login-button[_ngcontent-%COMP%]{height:48px;font-size:16px;display:flex;align-items:center;justify-content:center;gap:8px}.register-section[_ngcontent-%COMP%]{text-align:center;width:100%;padding:16px}.register-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 12px;color:#0009}.register-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;height:44px}@media (max-width: 480px){.login-container[_ngcontent-%COMP%]{padding:16px}.form-options[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}}"]})}}return i})()}}]);