"use strict";(self.webpackChunkcontrol_financiero_frontend=self.webpackChunkcontrol_financiero_frontend||[]).push([[160],{7160:(q,C,s)=>{s.r(C),s.d(C,{DashboardComponent:()=>Q});var g=s(177),M=s(8498),f=s(5596),E=s(6195),P=s(9213),b=s(8834),O=s(7575),D=s(2798),y=s(2102),x=s(9631),k=s(5416),j=s(1413),_=s(7468),F=s(6977),v=s(980),t=s(4438),u=s(1626),m=s(7673),h=s(6354),p=s(9437),S=s(5312);let G=(()=>{class r{constructor(o){this.http=o,this.apiUrl=`${S.c.apiUrl}`}obtenerResumenFinanciero(o,a){console.log("\u{1f50d} Dashboard Service - Obteniendo resumen financiero...");let n=new u.Nl;return o&&(n=n.set("fechaInicio",o)),a&&(n=n.set("fechaFin",a)),this.http.get(`${this.apiUrl}/dashboard/resumen-financiero`,{params:n}).pipe((0,h.T)(e=>(console.log("\u2705 Resumen financiero del backend (filtrado por usuario):",e),e)),(0,p.W)(e=>(console.error("\u274c Error al obtener resumen financiero:",e),console.log("\u{1f504} Fallback a datos vac\xedos"),(0,m.of)({totalIngresos:0,totalGastos:0,balance:0,fondosPorTipo:[],transaccionesPorCategoria:[],tendenciaMensual:[]}))))}obtenerDatosGraficoTendencia(o,a){console.log("\u{1f4c8} Dashboard Service - Obteniendo datos del gr\xe1fico de tendencias...");let n=new u.Nl;return o&&(n=n.set("fechaInicio",o)),a&&(n=n.set("fechaFin",a)),this.http.get(`${this.apiUrl}/dashboard/datos-grafico`,{params:n}).pipe((0,h.T)(e=>(console.log("\u2705 Datos del gr\xe1fico del backend:",e),e)),(0,p.W)(e=>(console.error("\u274c Error al obtener datos del gr\xe1fico:",e),console.log("\u{1f504} Fallback a datos vac\xedos"),(0,m.of)({labels:[],ingresos:[],gastos:[],periodo:"mes"}))))}obtenerEstadisticas(o,a){console.log("\u{1f4ca} Dashboard Service - Obteniendo estad\xedsticas...");let n=new u.Nl;return o&&(n=n.set("fechaInicio",o)),a&&(n=n.set("fechaFin",a)),this.http.get(`${this.apiUrl}/dashboard/estadisticas`,{params:n}).pipe((0,h.T)(e=>(console.log("\u2705 Estad\xedsticas del backend (filtradas por usuario):",e),e)),(0,p.W)(e=>(console.error("\u274c Error al obtener estad\xedsticas:",e),console.log("\u{1f504} Fallback a estad\xedsticas vac\xedas"),(0,m.of)({totalFondos:0,fondosActivos:0,transaccionesHoy:0,transaccionesMes:0,mayorGasto:0,mayorIngreso:0}))))}obtenerDatosGrafico(o,a="mes"){return console.log(`\u{1f4c8} Dashboard Service - Obteniendo datos de gr\xe1fico: ${o}`),this.obtenerResumenFinanciero().pipe((0,h.T)(n=>this.procesarDatosGrafico(o,n)),(0,p.W)(n=>(console.error(`\u274c Error al obtener datos de gr\xe1fico ${o}:`,n),(0,m.of)(this.getDatosGraficoFallback(o)))))}procesarDatosGrafico(o,a){switch(o){case"ingresos-gastos":return{labels:["Ingresos","Gastos"],datasets:[{data:[a.totalIngresos,a.totalGastos],backgroundColor:["#4caf50","#f44336"]}]};case"fondos":return{labels:a.fondosPorTipo.map(n=>n.tipo),datasets:[{data:a.fondosPorTipo.map(n=>n.montoTotal),backgroundColor:["#2196f3","#ff9800","#9c27b0","#4caf50"]}]};default:return{labels:[],datasets:[]}}}getDatosGraficoFallback(o){return{"ingresos-gastos":{labels:["Sin datos"],datasets:[{data:[0],backgroundColor:["#ccc"]}]},tendencia:{labels:[],datasets:[]},categorias:{labels:[],datasets:[]}}[o]||{labels:[],datasets:[]}}verificarConectividad(){return this.http.get(`${this.apiUrl}/dashboard/conectividad`).pipe((0,h.T)(()=>(console.log("\u2705 Backend conectado correctamente"),!0)),(0,p.W)(o=>(console.error("\u274c Backend no disponible:",o),(0,m.of)(!1))))}static{this.\u0275fac=function(a){return new(a||r)(t.KVO(u.Qq))}}static{this.\u0275prov=t.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var R=s(562),I=s(5435),$=s(8010),T=s(5567),w=s(6600);const z=["graficoCanvas"],A=(r,d)=>({positive:r,negative:d});function N(r,d){if(1&r){const o=t.RV6();t.j41(0,"div",31)(1,"mat-card",32)(2,"mat-card-content")(3,"div",33)(4,"mat-icon"),t.EFF(5,"warning"),t.k0s(),t.j41(6,"span"),t.EFF(7,"No se puede conectar con el servidor. Mostrando datos b\xe1sicos."),t.k0s(),t.j41(8,"button",34),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.reintentar())}),t.EFF(9," Reintentar "),t.k0s()()()()()}}function Y(r,d){if(1&r&&(t.j41(0,"mat-option",35),t.EFF(1),t.k0s()),2&r){const o=d.$implicit;t.Y8G("value",o.valor),t.R7$(),t.SpI(" ",o.etiqueta," ")}}function J(r,d){1&r&&(t.j41(0,"div",36)(1,"mat-icon"),t.EFF(2,"trending_up"),t.k0s(),t.j41(3,"p"),t.EFF(4,"No hay suficientes datos para mostrar la tendencia"),t.k0s(),t.j41(5,"small"),t.EFF(6,"Necesitas al menos algunas transacciones para ver el gr\xe1fico"),t.k0s()())}function B(r,d){1&r&&(t.j41(0,"div",37),t.nrm(1,"mat-progress-bar",38),t.j41(2,"p"),t.EFF(3,"Cargando fondos..."),t.k0s()())}function V(r,d){if(1&r){const o=t.RV6();t.j41(0,"div",39)(1,"mat-icon"),t.EFF(2,"error"),t.k0s(),t.j41(3,"p"),t.EFF(4),t.k0s(),t.j41(5,"button",34),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.cargarDatos())}),t.EFF(6," Reintentar "),t.k0s()()}if(2&r){const o=t.XpG();t.R7$(4),t.JRh(o.error)}}function U(r,d){1&r&&(t.j41(0,"div",40)(1,"mat-icon"),t.EFF(2,"savings_off"),t.k0s(),t.j41(3,"p"),t.EFF(4,"No hay fondos de ahorro disponibles"),t.k0s(),t.j41(5,"button",41),t.EFF(6," Crear Primer Fondo de Ahorro "),t.k0s()())}function H(r,d){if(1&r&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&r){const o=t.XpG().$implicit,a=t.XpG(2);t.R7$(),t.SpI(" / Meta: ",a.formatearMoneda(o.metaAhorro)," ")}}function X(r,d){if(1&r&&(t.j41(0,"small",51),t.EFF(1),t.k0s()),2&r){const o=t.XpG().$implicit;t.R7$(),t.SpI(" ",o.descripcion," ")}}function W(r,d){if(1&r&&(t.j41(0,"div",44)(1,"div",45)(2,"h4"),t.EFF(3),t.k0s(),t.j41(4,"p"),t.EFF(5),t.nI1(6,"titlecase"),t.k0s(),t.j41(7,"small"),t.EFF(8),t.DNE(9,H,2,1,"span",46),t.k0s(),t.DNE(10,X,2,1,"small",47),t.k0s(),t.j41(11,"div",48),t.nrm(12,"mat-progress-bar",49),t.j41(13,"span",50),t.EFF(14),t.k0s()()()),2&r){const o=d.$implicit,a=t.XpG(2);t.R7$(3),t.JRh(o.nombre),t.R7$(2),t.JRh(t.bMT(6,8,o.tipo)),t.R7$(3),t.SpI(" Saldo: ",a.formatearMoneda(o.saldoActual)," "),t.R7$(),t.Y8G("ngIf",o.metaAhorro&&o.metaAhorro>0),t.R7$(),t.Y8G("ngIf",o.descripcion),t.R7$(2),t.Y8G("value",a.calcularProgreso(o))("color",a.getColorProgreso(o)),t.R7$(2),t.SpI("",a.calcularProgreso(o),"%")}}function L(r,d){if(1&r&&(t.j41(0,"div",42),t.DNE(1,W,15,10,"div",43),t.k0s()),2&r){const o=t.XpG();t.R7$(),t.Y8G("ngForOf",o.obtenerFondosAhorro())("ngForTrackBy",o.trackByFondo)}}let Q=(()=>{class r{constructor(o,a,n,e,i){this.dashboardService=o,this.fondoService=a,this.transaccionService=n,this.authService=e,this.notificationService=i,this.destroy$=new j.B,this.chart=null,this.resumenFinanciero=null,this.estadisticas=null,this.fondos=[],this.datosGrafico=null,this.cargando=!1,this.error=null,this.backendConectado=!0,this.periodoActual="",this.filtroSeleccionado="mes",this.opcionesFiltro=[{valor:"dia",etiqueta:"Hoy"},{valor:"semana",etiqueta:"Esta semana"},{valor:"mes",etiqueta:"Este mes"},{valor:"todas",etiqueta:"Todas"}],this.actualizarPeriodoActual()}ngOnInit(){console.log("\u{1f680} Dashboard iniciando..."),console.log("\u{1f511} Token actual:",this.authService.getToken()?.substring(0,30)+"..."),console.log("\u{1f464} Usuario actual:",this.authService.getCurrentUser()),this.verificarConectividadYCargar()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.chart&&this.chart.destroy()}ngAfterViewInit(){setTimeout(()=>{this.inicializarGrafico()},100)}verificarConectividadYCargar(){this.cargando=!0,this.error=null,this.dashboardService.verificarConectividad().pipe((0,F.Q)(this.destroy$),(0,v.j)(()=>this.cargando=!1)).subscribe({next:o=>{this.backendConectado=o,o?(console.log("\u2705 Backend conectado, cargando datos reales..."),this.cargarDatos()):(console.warn("\u26a0\ufe0f Backend no disponible, mostrando estado sin datos"),this.mostrarEstadoSinDatos())},error:o=>{console.error("\u274c Error verificando conectividad:",o),this.backendConectado=!1,this.mostrarEstadoSinDatos()}})}cargarDatos(){if(!this.backendConectado)return void this.mostrarEstadoSinDatos();this.cargando=!0,this.error=null,console.log("\u{1f4ca} Cargando datos del dashboard con filtro:",this.filtroSeleccionado);const o=this.obtenerFiltrosFecha();(0,_.p)({resumen:this.dashboardService.obtenerResumenFinanciero(o.fechaInicio,o.fechaFin),estadisticas:this.dashboardService.obtenerEstadisticas(o.fechaInicio,o.fechaFin),fondos:this.fondoService.obtenerFondos(),datosGrafico:this.dashboardService.obtenerDatosGraficoTendencia(o.fechaInicio,o.fechaFin)}).pipe((0,F.Q)(this.destroy$),(0,v.j)(()=>this.cargando=!1)).subscribe({next:({resumen:n,estadisticas:e,fondos:i,datosGrafico:c})=>{console.log("\u2705 Datos cargados:",{resumen:n,estadisticas:e,fondos:i,datosGrafico:c}),this.resumenFinanciero=n,this.estadisticas=e,this.fondos=i,this.datosGrafico=c,setTimeout(()=>{this.actualizarGraficoConDatosReales()},100),this.notificationService.mostrarExito("Datos actualizados correctamente")},error:n=>{console.error("\u274c Error al cargar datos:",n),this.error="Error al cargar los datos del dashboard",this.notificationService.mostrarError("Error al cargar los datos"),this.mostrarEstadoSinDatos()}})}mostrarEstadoSinDatos(){this.resumenFinanciero={totalIngresos:0,totalGastos:0,balance:0,fondosPorTipo:[],transaccionesPorCategoria:[],tendenciaMensual:[]},this.estadisticas={totalFondos:0,fondosActivos:0,transaccionesHoy:0,transaccionesMes:0,mayorGasto:0,mayorIngreso:0},this.fondos=[],this.datosGrafico={labels:[],ingresos:[],gastos:[],periodo:"mes"}}refrescarFondos(){this.backendConectado?(this.cargando=!0,this.fondoService.obtenerFondos().pipe((0,F.Q)(this.destroy$),(0,v.j)(()=>this.cargando=!1)).subscribe({next:o=>{this.fondos=o,this.notificationService.mostrarExito("Fondos actualizados")},error:o=>{console.error("\u274c Error al refrescar fondos:",o),this.notificationService.mostrarError("Error al refrescar fondos")}})):this.notificationService.mostrarAdvertencia("No se puede refrescar sin conexi\xf3n al servidor")}reintentar(){this.verificarConectividadYCargar()}cambiarFiltro(o){this.filtroSeleccionado=o,this.actualizarPeriodoActual(),this.cargarDatos()}obtenerFiltrosFecha(){const o=new Date;switch(this.filtroSeleccionado){case"dia":const a=new Date(o);a.setHours(0,0,0,0);const n=new Date(o);return n.setHours(23,59,59,999),{fechaInicio:a.toISOString().split("T")[0],fechaFin:n.toISOString().split("T")[0]};case"semana":const e=new Date(o),i=o.getDay(),c=0===i?6:i-1;e.setDate(o.getDate()-c),e.setHours(0,0,0,0);const l=new Date(e);return l.setDate(e.getDate()+6),l.setHours(23,59,59,999),{fechaInicio:e.toISOString().split("T")[0],fechaFin:l.toISOString().split("T")[0]};case"mes":const K=new Date(o.getFullYear(),o.getMonth(),1),Z=new Date(o.getFullYear(),o.getMonth()+1,0,23,59,59,999);return{fechaInicio:K.toISOString().split("T")[0],fechaFin:Z.toISOString().split("T")[0]};default:return{}}}obtenerDescripcionPeriodo(){const o=new Date;switch(this.filtroSeleccionado){case"dia":return o.toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long",year:"numeric"});case"semana":const a=new Date(o),n=o.getDay(),e=0===n?6:n-1;a.setDate(o.getDate()-e);const i=new Date(a);return i.setDate(a.getDate()+6),`${a.getDate()} - ${i.getDate()} ${i.toLocaleDateString("es-ES",{month:"long",year:"numeric"})}`;case"mes":return o.toLocaleDateString("es-ES",{month:"long",year:"numeric"});case"todas":return"Desde el inicio";default:return""}}obtenerNumeroTransacciones(){if(!this.estadisticas)return 0;switch(this.filtroSeleccionado){case"dia":return this.estadisticas.transaccionesHoy||0;case"semana":case"mes":case"todas":return this.estadisticas.transaccionesMes||0;default:return 0}}obtenerMayorGasto(){return!this.estadisticas||!this.estadisticas.mayorGasto||this.estadisticas.mayorGasto<=0?"Sin datos":this.formatearMoneda(this.estadisticas.mayorGasto)}obtenerMayorIngreso(){return!this.estadisticas||!this.estadisticas.mayorIngreso||this.estadisticas.mayorIngreso<=0?"Sin datos":this.formatearMoneda(this.estadisticas.mayorIngreso)}obtenerFondosAhorro(){return this.fondos&&0!==this.fondos.length?this.fondos.filter(o=>"ahorro"===o.tipo):[]}inicializarGrafico(){if(!this.graficoCanvas)return void console.log("\u{1f534} Canvas no disponible a\xfan");const o=this.graficoCanvas.nativeElement.getContext("2d");if(!o)return void console.error("\u274c No se pudo obtener el contexto del canvas");const a=this.datosGrafico&&this.datosGrafico.labels&&this.datosGrafico.labels.length>0?this.datosGrafico:this.generarDatosEjemplo();this.chart=new window.Chart(o,{type:"line",data:{labels:a.labels,datasets:[{label:"Ingresos",data:a.ingresos,borderColor:"#4caf50",backgroundColor:"rgba(76, 175, 80, 0.1)",borderWidth:2,fill:!1,tension:.4},{label:"Gastos",data:a.gastos,borderColor:"#f44336",backgroundColor:"rgba(244, 67, 54, 0.1)",borderWidth:2,fill:!1,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,ticks:{callback:n=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(n)}}},plugins:{legend:{display:!0,position:"top"},tooltip:{mode:"index",intersect:!1,callbacks:{label:n=>`${n.dataset.label||""}: ${new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(n.parsed.y)}`}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}}),console.log("\u2705 Gr\xe1fico inicializado correctamente con:",a.labels?.length||0,"puntos de datos")}generarDatosEjemplo(){const o=[],a=[],n=[];for(let e=6;e>=0;e--){const i=new Date;i.setDate(i.getDate()-e),o.push(i.toLocaleDateString("es-ES",{weekday:"short",day:"numeric"})),a.push(0),n.push(0)}return{labels:o,ingresos:a,gastos:n,periodo:"semana"}}actualizarGraficoConDatosReales(){if(this.chart&&this.datosGrafico){if(console.log("\u{1f504} Actualizando gr\xe1fico con datos reales:",this.datosGrafico),this.datosGrafico.labels&&0!==this.datosGrafico.labels.length)this.chart.data.labels=this.datosGrafico.labels,this.chart.data.datasets[0].data=this.datosGrafico.ingresos,this.chart.data.datasets[1].data=this.datosGrafico.gastos;else{console.log("\u26a0\ufe0f No hay datos suficientes para el gr\xe1fico");const o=this.generarDatosEjemplo();this.chart.data.labels=o.labels,this.chart.data.datasets[0].data=o.ingresos,this.chart.data.datasets[1].data=o.gastos}this.chart.update("active"),console.log("\u2705 Gr\xe1fico actualizado con datos del backend")}else console.log("\u{1f504} No hay gr\xe1fico o datos disponibles para actualizar")}actualizarPeriodoActual(){this.periodoActual=this.obtenerDescripcionPeriodo()}calcularProgreso(o){return o.metaAhorro&&0!==o.metaAhorro?Math.min(Math.round(o.saldoActual/o.metaAhorro*100),100):0}getColorProgreso(o){const a=this.calcularProgreso(o);return a>=80?"primary":a>=50?"accent":"warn"}formatearMoneda(o){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(o)}trackByFondo(o,a){return a._id||o.toString()}static{this.\u0275fac=function(a){return new(a||r)(t.rXU(G),t.rXU(R.Y),t.rXU(I.j),t.rXU($.u),t.rXU(T.J))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-dashboard"]],viewQuery:function(a,n){if(1&a&&t.GBs(z,5),2&a){let e;t.mGM(e=t.lsd())&&(n.graficoCanvas=e.first)}},standalone:!0,features:[t.aNF],decls:125,vars:28,consts:[["graficoCanvas",""],[1,"dashboard-container"],["class","alerta-conexion",4,"ngIf"],[1,"filtro-periodo-card"],[1,"filtro-periodo"],[1,"filtro-label"],["appearance","outline",1,"filtro-select"],[3,"valueChange","selectionChange","value","disabled"],[3,"value",4,"ngFor","ngForOf"],[1,"periodo-descripcion"],[1,"grafico-card"],[1,"grafico-container"],["width","400","height","200"],["class","sin-datos-grafico",4,"ngIf"],[1,"estadisticas-grid","mb-2"],[1,"stat-card","ingresos"],[1,"stat-content"],[1,"stat-icon"],[1,"stat-info"],[1,"stat-card","gastos"],[1,"stat-card","balance",3,"ngClass"],[1,"stat-card","fondos"],[1,"stat-card","transacciones"],[1,"stat-card","mayor-gasto"],[1,"stat-card","mayor-ingreso"],[1,"fondos-card"],["mat-icon-button","",3,"click","disabled"],["class","loading-container",4,"ngIf"],["class","error-state",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","fondos-list",4,"ngIf"],[1,"alerta-conexion"],[1,"warning-card"],[1,"warning-content"],["mat-raised-button","","color","primary",3,"click"],[3,"value"],[1,"sin-datos-grafico"],[1,"loading-container"],["mode","indeterminate"],[1,"error-state"],[1,"empty-state"],["mat-raised-button","","color","primary","routerLink","/fondos"],[1,"fondos-list"],["class","fondo-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"fondo-item"],[1,"fondo-info"],[4,"ngIf"],["class","descripcion",4,"ngIf"],[1,"fondo-progreso"],["mode","determinate",3,"value","color"],[1,"progreso-text"],[1,"descripcion"]],template:function(a,n){if(1&a){const e=t.RV6();t.j41(0,"div",1),t.DNE(1,N,10,0,"div",2),t.j41(2,"mat-card",3)(3,"mat-card-content")(4,"div",4)(5,"span",5),t.EFF(6,"Per\xedodo:"),t.k0s(),t.j41(7,"mat-form-field",6)(8,"mat-select",7),t.mxI("valueChange",function(c){return t.eBV(e),t.DH7(n.filtroSeleccionado,c)||(n.filtroSeleccionado=c),t.Njj(c)}),t.bIt("selectionChange",function(c){return t.eBV(e),t.Njj(n.cambiarFiltro(c.value))}),t.DNE(9,Y,2,2,"mat-option",8),t.k0s()(),t.j41(10,"span",9),t.EFF(11),t.k0s()()()(),t.j41(12,"mat-card",10)(13,"mat-card-header")(14,"mat-card-title"),t.EFF(15,"Tendencia de Ingresos vs Gastos"),t.k0s()(),t.j41(16,"mat-card-content")(17,"div",11),t.nrm(18,"canvas",12,0),t.k0s(),t.DNE(20,J,7,0,"div",13),t.k0s()(),t.j41(21,"div",14)(22,"mat-card",15)(23,"mat-card-content")(24,"div",16)(25,"div",17)(26,"mat-icon"),t.EFF(27,"trending_up"),t.k0s()(),t.j41(28,"div",18)(29,"h3"),t.EFF(30),t.k0s(),t.j41(31,"p"),t.EFF(32,"Total Ingresos"),t.k0s(),t.j41(33,"small"),t.EFF(34),t.k0s()()()()(),t.j41(35,"mat-card",19)(36,"mat-card-content")(37,"div",16)(38,"div",17)(39,"mat-icon"),t.EFF(40,"trending_down"),t.k0s()(),t.j41(41,"div",18)(42,"h3"),t.EFF(43),t.k0s(),t.j41(44,"p"),t.EFF(45,"Total Gastos"),t.k0s(),t.j41(46,"small"),t.EFF(47),t.k0s()()()()(),t.j41(48,"mat-card",20)(49,"mat-card-content")(50,"div",16)(51,"div",17)(52,"mat-icon"),t.EFF(53),t.k0s()(),t.j41(54,"div",18)(55,"h3"),t.EFF(56),t.k0s(),t.j41(57,"p"),t.EFF(58,"Balance Total"),t.k0s(),t.j41(59,"small"),t.EFF(60),t.k0s()()()()(),t.j41(61,"mat-card",21)(62,"mat-card-content")(63,"div",16)(64,"div",17)(65,"mat-icon"),t.EFF(66,"savings"),t.k0s()(),t.j41(67,"div",18)(68,"h3"),t.EFF(69),t.k0s(),t.j41(70,"p"),t.EFF(71,"Fondos Activos"),t.k0s(),t.j41(72,"small"),t.EFF(73),t.k0s()()()()(),t.j41(74,"mat-card",22)(75,"mat-card-content")(76,"div",16)(77,"div",17)(78,"mat-icon"),t.EFF(79,"receipt"),t.k0s()(),t.j41(80,"div",18)(81,"h3"),t.EFF(82),t.k0s(),t.j41(83,"p"),t.EFF(84,"Transacciones"),t.k0s(),t.j41(85,"small"),t.EFF(86),t.k0s()()()()(),t.j41(87,"mat-card",23)(88,"mat-card-content")(89,"div",16)(90,"div",17)(91,"mat-icon"),t.EFF(92,"money_off"),t.k0s()(),t.j41(93,"div",18)(94,"h3"),t.EFF(95),t.k0s(),t.j41(96,"p"),t.EFF(97,"Mayor Gasto"),t.k0s(),t.j41(98,"small"),t.EFF(99,"Transacci\xf3n individual"),t.k0s()()()()(),t.j41(100,"mat-card",24)(101,"mat-card-content")(102,"div",16)(103,"div",17)(104,"mat-icon"),t.EFF(105,"attach_money"),t.k0s()(),t.j41(106,"div",18)(107,"h3"),t.EFF(108),t.k0s(),t.j41(109,"p"),t.EFF(110,"Mayor Ingreso"),t.k0s(),t.j41(111,"small"),t.EFF(112,"Transacci\xf3n individual"),t.k0s()()()()()(),t.j41(113,"mat-card",25)(114,"mat-card-header")(115,"mat-card-title"),t.EFF(116," Progreso Ahorros "),t.j41(117,"button",26),t.bIt("click",function(){return t.eBV(e),t.Njj(n.refrescarFondos())}),t.j41(118,"mat-icon"),t.EFF(119,"refresh"),t.k0s()()()(),t.j41(120,"mat-card-content"),t.DNE(121,B,4,0,"div",27)(122,V,7,1,"div",28)(123,U,7,0,"div",29)(124,L,2,2,"div",30),t.k0s()()()}if(2&a){let e,i,c,l;t.R7$(),t.Y8G("ngIf",!n.backendConectado),t.R7$(7),t.R50("value",n.filtroSeleccionado),t.Y8G("disabled",n.cargando),t.R7$(),t.Y8G("ngForOf",n.opcionesFiltro),t.R7$(2),t.JRh(n.obtenerDescripcionPeriodo()),t.R7$(9),t.Y8G("ngIf",!n.datosGrafico||!n.datosGrafico.labels||0===n.datosGrafico.labels.length),t.R7$(10),t.JRh(n.formatearMoneda((null==n.resumenFinanciero?null:n.resumenFinanciero.totalIngresos)||0)),t.R7$(4),t.JRh(n.obtenerDescripcionPeriodo()),t.R7$(9),t.JRh(n.formatearMoneda((null==n.resumenFinanciero?null:n.resumenFinanciero.totalGastos)||0)),t.R7$(4),t.JRh(n.obtenerDescripcionPeriodo()),t.R7$(),t.Y8G("ngClass",t.l_i(25,A,(null!==(e=null==n.resumenFinanciero?null:n.resumenFinanciero.balance)&&void 0!==e?e:0)>=0,(null!==(e=null==n.resumenFinanciero?null:n.resumenFinanciero.balance)&&void 0!==e?e:0)<0)),t.R7$(5),t.JRh((null!==(i=null==n.resumenFinanciero?null:n.resumenFinanciero.balance)&&void 0!==i?i:0)>=0?"account_balance":"warning"),t.R7$(3),t.JRh(n.formatearMoneda(null!==(c=null==n.resumenFinanciero?null:n.resumenFinanciero.balance)&&void 0!==c?c:0)),t.R7$(4),t.JRh((null!==(l=null==n.resumenFinanciero?null:n.resumenFinanciero.balance)&&void 0!==l?l:0)>=0?"Positivo":"Negativo"),t.R7$(9),t.JRh((null==n.estadisticas?null:n.estadisticas.fondosActivos)||0),t.R7$(4),t.SpI("de ",(null==n.estadisticas?null:n.estadisticas.totalFondos)||0," totales"),t.R7$(9),t.JRh(n.obtenerNumeroTransacciones()),t.R7$(4),t.JRh(n.obtenerDescripcionPeriodo()),t.R7$(9),t.JRh(n.obtenerMayorGasto()),t.R7$(13),t.JRh(n.obtenerMayorIngreso()),t.R7$(9),t.Y8G("disabled",n.cargando),t.R7$(4),t.Y8G("ngIf",n.cargando),t.R7$(),t.Y8G("ngIf",!n.cargando&&n.error),t.R7$(),t.Y8G("ngIf",!n.cargando&&!n.error&&0===n.obtenerFondosAhorro().length),t.R7$(),t.Y8G("ngIf",!n.cargando&&!n.error&&n.obtenerFondosAhorro().length>0)}},dependencies:[g.MD,g.YU,g.Sq,g.bT,g.PV,M.iI,M.Wk,f.Hu,f.RN,f.m2,f.MM,f.dh,E.Fe,P.m_,P.An,b.Hl,b.$z,b.iY,O.PO,O.HM,D.Ve,y.rl,D.VO,w.wT,y.RG,x.fS,k._T],styles:[".dashboard-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.alerta-conexion[_ngcontent-%COMP%]{margin-bottom:20px}.warning-card[_ngcontent-%COMP%]{background-color:#fff3cd;border-left:4px solid #ffc107}.warning-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.warning-content[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#856404}.filtro-periodo-card[_ngcontent-%COMP%]{margin-bottom:20px}.filtro-periodo[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;flex-wrap:wrap}.filtro-label[_ngcontent-%COMP%]{font-weight:500;color:#000000b3;white-space:nowrap}.filtro-select[_ngcontent-%COMP%]{min-width:150px}.filtro-select[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{margin-bottom:0}.periodo-descripcion[_ngcontent-%COMP%]{color:#0009;font-size:.9em;font-style:italic}.grafico-card[_ngcontent-%COMP%]{margin-bottom:20px}.grafico-container[_ngcontent-%COMP%]{position:relative;height:300px;width:100%}.grafico-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{max-width:100%;height:auto}.sin-datos-grafico[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#0009}.sin-datos-grafico[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#0000004d;margin-bottom:16px}.sin-datos-grafico[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;font-size:1em}.sin-datos-grafico[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.85em;color:#00000080}.estadisticas-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;margin-bottom:20px}.stat-card[_ngcontent-%COMP%]{border-left:4px solid;transition:transform .2s ease,box-shadow .2s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.stat-card.ingresos[_ngcontent-%COMP%]{border-left-color:#4caf50}.stat-card.gastos[_ngcontent-%COMP%]{border-left-color:#f44336}.stat-card.balance.positive[_ngcontent-%COMP%]{border-left-color:#4caf50}.stat-card.balance.negative[_ngcontent-%COMP%]{border-left-color:#f44336}.stat-card.fondos[_ngcontent-%COMP%]{border-left-color:#2196f3}.stat-card.transacciones[_ngcontent-%COMP%]{border-left-color:#ff9800}.stat-card.mayor-gasto[_ngcontent-%COMP%]{border-left-color:#9c27b0}.stat-card.mayor-ingreso[_ngcontent-%COMP%]{border-left-color:#4caf50}.stat-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.stat-icon[_ngcontent-%COMP%]{background:#0000001a;border-radius:50%;padding:12px;display:flex;align-items:center;justify-content:center}.stat-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.stat-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.5em;font-weight:500}.stat-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0 0;color:#0009;font-size:.9em}.stat-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#00000080;font-size:.8em}.fondos-card[_ngcontent-%COMP%]{margin-bottom:20px}.fondos-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.loading-container[_ngcontent-%COMP%]{text-align:center;padding:20px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#0009}.error-state[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#f44336}.error-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px 20px}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#0000004d;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#0009;margin-bottom:20px}.fondos-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.fondo-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px;border:1px solid rgba(0,0,0,.1);border-radius:8px;transition:box-shadow .2s ease}.fondo-item[_ngcontent-%COMP%]:hover{box-shadow:0 2px 4px #0000001a}.fondo-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1.1em}.fondo-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0 0;color:#0009;font-size:.9em}.fondo-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#00000080;font-size:.8em;display:block;margin-top:2px}.fondo-info[_ngcontent-%COMP%]   small.descripcion[_ngcontent-%COMP%]{font-style:italic;margin-top:4px}.fondo-progreso[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;min-width:200px}.fondo-progreso[_ngcontent-%COMP%]   mat-progress-bar[_ngcontent-%COMP%]{flex:1}.progreso-text[_ngcontent-%COMP%]{font-weight:500;min-width:40px;text-align:right}.resumen-tipos-card[_ngcontent-%COMP%]{margin-bottom:20px}.tipos-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px}.tipo-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px;border:1px solid rgba(0,0,0,.1);border-radius:8px}.tipo-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1em}.tipo-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:2px 0;font-size:.9em;color:#0009}.tipo-progreso[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;min-width:120px}.tipo-progreso[_ngcontent-%COMP%]   mat-progress-bar[_ngcontent-%COMP%]{flex:1}.tipo-progreso[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9em;font-weight:500}@media (max-width: 768px){.dashboard-container[_ngcontent-%COMP%]{padding:16px}.filtro-periodo[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.filtro-select[_ngcontent-%COMP%]{width:100%;min-width:auto}.grafico-container[_ngcontent-%COMP%]{height:250px}.estadisticas-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.fondo-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.fondo-progreso[_ngcontent-%COMP%]{width:100%}.tipos-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.tipo-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.tipo-progreso[_ngcontent-%COMP%]{width:100%}}"]})}}return r})()}}]);